"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{1491:(e,t,a)=>{a.d(t,{E:()=>i});var s=a(9236),r=a(3861);let i=e=>{let{className:t,variant:a="default",...i}=e;return(0,s.jsx)("span",{className:(0,r.$)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium","border border-current border-opacity-20",{default:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800"}[a],t),role:i.role||"status",...i})}},2413:(e,t,a)=>{a.d(t,{$:()=>c});var s=a(9236),r=a(1032),i=a(7373),l=a(3861);let n=(0,i.F)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background select-none",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-600",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 focus:ring-gray-500",ghost:"hover:bg-gray-100 focus:ring-gray-500"},size:{default:"h-10 py-2 px-4",sm:"h-8 px-3 text-sm",lg:"h-12 px-6 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,r.forwardRef)((e,t)=>{let{className:a,variant:r,size:i,...c}=e;return(0,s.jsx)("button",{className:(0,l.$)(n({variant:r,size:i,className:a})),ref:t,...c})});c.displayName="Button"},3192:(e,t,a)=>{a.d(t,{ProductFiltersComponent:()=>n});var s=a(9236),r=a(6703),i=a(8405),l=a(2413);let n=e=>{let{filters:t,onFiltersChange:a}=e;return(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.J,{htmlFor:"sort",children:"Sort By"}),(0,s.jsx)(i.l,{id:"sort",value:t.sortOrder,onChange:e=>{var s;return s=e.target.value,void a({...t,sortOrder:s})},children:[{value:"name-asc",label:"Alphabetically (A-Z)"},{value:"name-desc",label:"Alphabetically (Z-A)"},{value:"price-asc",label:"Price (Low-High)"},{value:"price-desc",label:"Price (High-Low)"},{value:"discount-desc",label:"Discount (Highest first)"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(r.J,{children:"Filter by Color"}),(0,s.jsx)("div",{className:"space-y-2",children:[{value:"green",label:"Green"},{value:"orange",label:"Orange"},{value:"yellow",label:"Yellow"}].map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.colors.includes(e.value),onChange:()=>(e=>{let s=t.colors.includes(e)?t.colors.filter(t=>t!==e):[...t.colors,e];a({...t,colors:s})})(e.value),className:"rounded border-gray-300"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full ".concat("green"===e.value?"bg-green-500":"orange"===e.value?"bg-orange-500":"bg-yellow-500")}),(0,s.jsx)("span",{children:e.label})]})]},e.value))})]}),(0,s.jsx)(l.$,{variant:"outline",onClick:()=>{a({colors:[],sortOrder:"name-asc",searchQuery:t.searchQuery})},className:"w-full",children:"Clear Filters"})]})}},4985:(e,t,a)=>{a.d(t,{Ay:()=>d});var s=a(4903);class r extends Error{constructor(e,t,a){super(t),this.status=e,this.code=a,this.name="ApiException"}}class i{setupInterceptors(){this.axiosInstance.interceptors.request.use(e=>{let t=this.getAuthToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e.data,e=>{var t,a,s,i,l;let n=(null==(t=e.response)?void 0:t.status)||500;throw new r(n,(null==(s=e.response)||null==(a=s.data)?void 0:a.message)||e.message||"An error occurred",null==(l=e.response)||null==(i=l.data)?void 0:i.code)})}getAuthToken(){return localStorage.getItem("authToken")}buildConfig(e){return{headers:null==e?void 0:e.headers,params:null==e?void 0:e.params,timeout:null==e?void 0:e.timeout}}async get(e,t){return this.axiosInstance.get(e,this.buildConfig(t))}async post(e,t,a){return this.axiosInstance.post(e,t,this.buildConfig(a))}async put(e,t,a){return this.axiosInstance.put(e,t,this.buildConfig(a))}async delete(e,t){return this.axiosInstance.delete(e,this.buildConfig(t))}constructor(e,t=1e4){this.axiosInstance=s.A.create({baseURL:e,timeout:t,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}}class l{async getAllProducts(){return(await this.httpClient.get("/products")).data||[]}async getProductById(e){return(await this.httpClient.get("/products/".concat(e))).data}async searchProducts(e){return(await this.httpClient.get("/suggestions?searchQuery=".concat(encodeURIComponent(e)))).data||[]}async getFilteredProducts(e){let t=new URLSearchParams;e.searchQuery&&t.append("search",e.searchQuery),e.colors&&e.colors.length>0&&t.append("colors",e.colors.join(",")),e.sortOrder&&t.append("sort",e.sortOrder);let a=t.toString();return(await this.httpClient.get(a?"/products?".concat(a):"/products")).data||[]}constructor(e){this.httpClient=e}}class n{async getCart(){return(await this.httpClient.get("/cart")).data||{items:[],totalPrice:0,totalItems:0}}async addToCart(e){return(await this.httpClient.post("/cart",e)).data||{items:[],totalPrice:0,totalItems:0}}async removeFromCart(e,t){return(await this.httpClient.post("/cart/remove",{productId:e,quantity:t})).data||{items:[],totalPrice:0,totalItems:0}}constructor(e){this.httpClient=e}}class c{async updatePassword(e){await this.httpClient.put("/user/password",e)}constructor(e){this.httpClient=e}}class o{static getInstance(){return o.instance||(o.instance=new o),o.instance}constructor(){this.httpClient=new i("/api"),this.products=new l(this.httpClient),this.cart=new n(this.httpClient),this.user=new c(this.httpClient)}}let d=o},6703:(e,t,a)=>{a.d(t,{J:()=>l});var s=a(9236),r=a(1032),i=a(3861);let l=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("label",{ref:t,className:(0,i.$)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...r})});l.displayName="Label"},8018:(e,t,a)=>{a.d(t,{Modal:()=>c});var s=a(9236),r=a(1032),i=a(9788),l=a(2413),n=a(9193);let c=e=>{let{isOpen:t,onClose:a,title:c,children:o,size:d="md"}=e;return((0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a()};if(t){document.addEventListener("keydown",e),document.body.style.overflow="hidden";let t=document.getElementById("modal-dialog");t&&t.focus()}return()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,a]),t)?(0,s.jsx)(n.Portal,{children:(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":c?"modal-title":void 0,children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:a,"aria-hidden":"true"}),(0,s.jsxs)("div",{id:"modal-dialog",className:"relative bg-white rounded-lg shadow-lg w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[d]," max-h-[90vh] overflow-hidden focus:outline-none"),tabIndex:-1,children:[c&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,s.jsx)("h2",{id:"modal-title",className:"text-xl font-semibold",children:c}),(0,s.jsx)(l.$,{variant:"ghost",size:"sm",onClick:a,className:"p-1 h-auto","aria-label":"Close dialog",children:(0,s.jsx)(i.A,{className:"w-5 h-5","aria-hidden":"true"})})]}),(0,s.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",role:"document",children:o})]})]})}):null}},8405:(e,t,a)=>{a.d(t,{l:()=>l});var s=a(9236),r=a(1032),i=a(3861);let l=(0,r.forwardRef)((e,t)=>{let{className:a,error:r,children:l,...n}=e;return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("select",{className:(0,i.$)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r&&"border-red-500 focus-visible:ring-red-500",a),ref:t,...n,children:l}),r&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r})]})});l.displayName="Select"},8611:(e,t,a)=>{a.d(t,{p:()=>l});var s=a(9236),r=a(1032),i=a(3861);let l=(0,r.forwardRef)((e,t)=>{let{className:a,type:r="text",error:l,label:n,id:c,...o}=e,d=c||"input-".concat(Math.random().toString(36).substr(2,9)),u=l?"".concat(d,"-error"):void 0;return(0,s.jsxs)("div",{className:"w-full",children:[n&&(0,s.jsx)("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),(0,s.jsx)("input",{id:d,type:r,className:(0,i.$)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50",l&&"border-red-500 focus:ring-red-600",a),"aria-invalid":l?"true":"false","aria-describedby":u,ref:t,...o}),l&&(0,s.jsx)("p",{id:u,role:"alert","aria-live":"polite",className:"mt-1 text-sm text-red-600",children:l})]})});l.displayName="Input"},9193:(e,t,a)=>{a.d(t,{Portal:()=>i});var s=a(1032),r=a(4569);let i=e=>{let{children:t}=e,[a,i]=(0,s.useState)(!1),[l,n]=(0,s.useState)(null);return((0,s.useEffect)(()=>{i(!0);let e=document.getElementById("portal-root");return e||((e=document.createElement("div")).id="portal-root",document.body.appendChild(e)),n(e),()=>i(!1)},[]),a&&l)?(0,r.createPortal)(t,l):null}},9578:(e,t,a)=>{a.d(t,{ProductCard:()=>g});var s=a(9236),r=a(1032);class i{static filterProducts(e,t){let a=e;if(t.searchQuery){let e=t.searchQuery.toLowerCase();a=a.filter(t=>t.name.toLowerCase().includes(e))}return t.colors.length>0&&(a=a.filter(e=>e.colors.some(e=>t.colors.includes(e)))),a=this.sortProducts(a,t.sortOrder)}static sortProducts(e,t){let a=[...e];switch(t){case"name-asc":return a.sort((e,t)=>e.name.localeCompare(t.name));case"name-desc":return a.sort((e,t)=>t.name.localeCompare(e.name));case"price-asc":return a.sort((e,t)=>e.price-t.price);case"price-desc":return a.sort((e,t)=>t.price-e.price);case"discount-desc":return a.sort((e,t)=>t.discount-e.discount);default:return a}}static calculateDiscountedPrice(e,t){return e*(1-t/100)}static isValidQuantity(e,t){return e>0&&e%t==0}static getMaxValidQuantity(e,t){return Math.floor(e/t)*t}}class l{static addToCart(e,t,a){let s,r=e.items.findIndex(e=>e.productId===t.id);if(r>=0)s=e.items.map((e,t)=>t===r?{...e,quantity:e.quantity+a}:e);else{let r={productId:t.id,productName:t.name,price:t.price,quantity:a,image:t.image,packageSize:t.packageSize};s=[...e.items,r]}return this.calculateTotals({...e,items:s})}static removeFromCart(e,t,a){let s=e.items.map(e=>e.productId===t?{...e,quantity:Math.max(0,e.quantity-a)}:e).filter(e=>e.quantity>0);return this.calculateTotals({...e,items:s})}static calculateTotals(e){let t=e.items.reduce((e,t)=>e+t.quantity,0),a=e.items.reduce((e,t)=>e+t.price*t.quantity,0);return{...e,totalItems:t,totalPrice:a}}static getItemQuantityInCart(e,t){return e.items.filter(e=>e.productId===t).reduce((e,t)=>e+t.quantity,0)}static groupItemsByProductId(e){return Object.values(e.reduce((e,t)=>(e[t.productId]?e[t.productId]={...e[t.productId],quantity:e[t.productId].quantity+t.quantity}:e[t.productId]={...t},e),{}))}static removeItemsPartially(e,t,a){let s=a,r=[];for(let a of e.items)if(a.productId===t&&s>0){let e=a.quantity;e<=s?s-=e:(r.push({...a,quantity:e-s}),s=0)}else r.push(a);return this.calculateTotals({...e,items:r})}}var n=a(9881),c=a(2413),o=a(8611),d=a(1491),u=a(8018),m=a(9197),h=a(2869),p=a(9245);let g=e=>{let{product:t}=e,[a,g]=(0,r.useState)(t.packageSize),[x,b]=(0,r.useState)(!1),{data:f}=(0,n._$)(),{mutate:y,isPending:v}=(0,n.AP)(),j=i.calculateDiscountedPrice(t.price,t.discount),w=f?l.getItemQuantityInCart(f,t.id):0,N=t.stock-w,C=i.isValidQuantity(a,t.packageSize),k=C&&a<=N&&N>0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("article",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2","aria-labelledby":"product-title-".concat(t.id),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(p.default,{src:t.image,alt:"".concat(t.name," - Fresh fruit available in ").concat(t.colors.join(", ")," colors"),width:400,height:300,className:"w-full h-48 object-cover",priority:!1}),t.discount>0&&(0,s.jsxs)(d.E,{variant:"danger",className:"absolute top-2 right-2","aria-label":"".concat(t.discount,"% discount"),children:[t.discount,"% OFF"]})]}),(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{id:"product-title-".concat(t.id),className:"font-semibold text-lg",children:t.name}),(0,s.jsx)("div",{className:"flex items-center space-x-2 mt-1","aria-label":"Available colors",children:t.colors.map(e=>(0,s.jsx)("div",{className:"w-4 h-4 rounded-full ".concat("green"===e?"bg-green-500":"orange"===e?"bg-orange-500":"bg-yellow-500"),"aria-label":"".concat(e," color option"),role:"img"},e))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2","aria-label":"Price information",children:[(0,s.jsxs)("span",{className:"text-lg font-bold",children:["$",j.toFixed(2)]}),t.discount>0&&(0,s.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",t.price.toFixed(2)]})]}),(0,s.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>b(!0),"aria-label":"View details for ".concat(t.name),children:(0,s.jsx)(m.A,{className:"w-4 h-4","aria-hidden":"true"})})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600","aria-label":"Product information",children:[(0,s.jsxs)("p",{children:["Stock: ",(0,s.jsx)("span",{"aria-label":"".concat(N," units available"),children:N})]}),(0,s.jsxs)("p",{children:["Package: ",(0,s.jsxs)("span",{"aria-label":"Sold in packages of ".concat(t.packageSize," units"),children:[t.packageSize," units"]})]})]}),(0,s.jsxs)("fieldset",{className:"flex items-center space-x-2",children:[(0,s.jsx)("legend",{className:"sr-only",children:"Select quantity"}),(0,s.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>{let e=a-t.packageSize;e>=t.packageSize&&g(e)},disabled:a<=t.packageSize,"aria-label":"Decrease quantity by ".concat(t.packageSize),children:"-"}),(0,s.jsx)(o.p,{type:"number",value:a,onChange:e=>{g(parseInt(e.target.value)||0)},className:"w-20 text-center",min:t.packageSize,step:t.packageSize,"aria-label":"Quantity","aria-describedby":"quantity-help-".concat(t.id)}),(0,s.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>{let e=a+t.packageSize;e<=N&&g(e)},disabled:a+t.packageSize>N,"aria-label":"Increase quantity by ".concat(t.packageSize),children:"+"}),(0,s.jsxs)("div",{id:"quantity-help-".concat(t.id),className:"sr-only",children:["Quantity must be in multiples of ",t.packageSize,". Available stock: ",N]})]}),(0,s.jsxs)(c.$,{onClick:()=>{k&&y({productId:t.id,productName:t.name,price:j,quantity:a,image:t.image,packageSize:t.packageSize})},disabled:!k||v,className:"w-full","aria-describedby":C?void 0:"quantity-error-".concat(t.id),children:[(0,s.jsx)(h.A,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),v?"Adding to cart...":"Add ".concat(a," ").concat(1===a?"unit":"units"," to Cart")]}),!C&&(0,s.jsxs)("p",{id:"quantity-error-".concat(t.id),role:"alert",className:"text-sm text-red-600",children:["Quantity must be a multiple of ",t.packageSize]})]})]}),(0,s.jsx)(u.Modal,{isOpen:x,onClose:()=>b(!1),title:"".concat(t.name," - Product Details"),size:"lg",children:(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsx)(p.default,{src:t.image,alt:"Detailed view of ".concat(t.name," - Fresh fruit"),width:600,height:400,className:"w-full h-64 object-cover rounded-lg"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold",children:t.name}),(0,s.jsxs)("div",{className:"flex items-center space-x-2","aria-label":"Price information",children:[(0,s.jsxs)("span",{className:"text-2xl font-bold",children:["$",j.toFixed(2)]}),t.discount>0&&(0,s.jsxs)("span",{className:"text-lg text-gray-500 line-through","aria-label":"Original price $".concat(t.price.toFixed(2)),children:["$",t.price.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"Available colors:"}),t.colors.map(e=>(0,s.jsx)("div",{className:"w-6 h-6 rounded-full ".concat("green"===e?"bg-green-500":"orange"===e?"bg-orange-500":"bg-yellow-500"),"aria-label":"".concat(e," color option"),role:"img"},e))]}),t.discount>0&&(0,s.jsxs)(d.E,{variant:"danger","aria-label":"".concat(t.discount,"% discount applied"),children:[t.discount,"% OFF"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Stock:"})," ",t.stock," units"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Package Size:"})," ",t.packageSize," units"]})]}),(0,s.jsx)("p",{className:"text-gray-700",children:t.description})]})]})})]})}},9881:(e,t,a)=>{a.d(t,{AP:()=>c,IM:()=>o,_$:()=>n});var s=a(3018),r=a(3243),i=a(2397),l=a(4985);let n=()=>(0,s.I)({queryKey:["cart"],queryFn:()=>l.Ay.getInstance().cart.getCart(),retry:1,staleTime:3e4,placeholderData:{items:[],totalPrice:0,totalItems:0}}),c=()=>{let e=(0,r.jE)();return(0,i.n)({mutationFn:e=>l.Ay.getInstance().cart.addToCart(e),onSuccess:()=>{e.invalidateQueries({queryKey:["cart"]})}})},o=()=>{let e=(0,r.jE)();return(0,i.n)({mutationFn:e=>{let{productId:t,quantity:a}=e;return l.Ay.getInstance().cart.removeFromCart(t,a)},onSuccess:()=>{e.invalidateQueries({queryKey:["cart"]})}})}}}]);