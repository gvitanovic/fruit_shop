"use strict";var Hr=e=>{throw TypeError(e)};var dr=(e,t,r)=>t.has(e)||Hr("Cannot "+r);var m=(e,t,r)=>(dr(e,t,"read from private field"),r?r.call(e):t.get(e)),V=(e,t,r)=>t.has(e)?Hr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),O=(e,t,r,s)=>(dr(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),he=(e,t,r)=>(dr(e,t,"access private method"),r);var Vt=(e,t,r,s)=>({set _(n){O(e,t,n,r)},get _(){return m(e,t,s)}});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const T=require("react"),Vn=require("react-dom"),Y=require("lucide-react"),Un=require("use-debounce"),Ye=require("@fruit-shop/hooks"),Gr=require("next/link"),Ws=require("next/navigation"),Et=require("@fruit-shop/domain"),pr=require("next/image");function Ln(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const Wt=Ln(T);var gr={exports:{}},_t={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yr;function Mn(){if(Yr)return _t;Yr=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var c in n)c!=="key"&&(i[c]=n[c])}else i=n;return n=i.ref,{$$typeof:e,type:s,key:o,ref:n!==void 0?n:null,props:i}}return _t.Fragment=t,_t.jsx=r,_t.jsxs=r,_t}var jt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jr;function qn(){return Jr||(Jr=1,process.env.NODE_ENV!=="production"&&function(){function e(v){if(v==null)return null;if(typeof v=="function")return v.$$typeof===le?null:v.displayName||v.name||null;if(typeof v=="string")return v;switch(v){case x:return"Fragment";case S:return"Profiler";case z:return"StrictMode";case D:return"Suspense";case ee:return"SuspenseList";case I:return"Activity"}if(typeof v=="object")switch(typeof v.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),v.$$typeof){case E:return"Portal";case $:return(v.displayName||"Context")+".Provider";case w:return(v._context.displayName||"Context")+".Consumer";case A:var R=v.render;return v=v.displayName,v||(v=R.displayName||R.name||"",v=v!==""?"ForwardRef("+v+")":"ForwardRef"),v;case oe:return R=v.displayName||null,R!==null?R:e(v.type)||"Memo";case ve:R=v._payload,v=v._init;try{return e(v(R))}catch{}}return null}function t(v){return""+v}function r(v){try{t(v);var R=!1}catch{R=!0}if(R){R=console;var B=R.error,ne=typeof Symbol=="function"&&Symbol.toStringTag&&v[Symbol.toStringTag]||v.constructor.name||"Object";return B.call(R,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",ne),t(v)}}function s(v){if(v===x)return"<>";if(typeof v=="object"&&v!==null&&v.$$typeof===ve)return"<...>";try{var R=e(v);return R?"<"+R+">":"<...>"}catch{return"<...>"}}function n(){var v=de.A;return v===null?null:v.getOwner()}function i(){return Error("react-stack-top-frame")}function o(v){if(Z.call(v,"key")){var R=Object.getOwnPropertyDescriptor(v,"key").get;if(R&&R.isReactWarning)return!1}return v.key!==void 0}function c(v,R){function B(){ae||(ae=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",R))}B.isReactWarning=!0,Object.defineProperty(v,"key",{get:B,configurable:!0})}function h(){var v=e(this.type);return fe[v]||(fe[v]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),v=this.props.ref,v!==void 0?v:null}function p(v,R,B,ne,ze,we,wt,Je){return B=we.ref,v={$$typeof:j,type:v,key:R,props:we,_owner:ze},(B!==void 0?B:null)!==null?Object.defineProperty(v,"ref",{enumerable:!1,get:h}):Object.defineProperty(v,"ref",{enumerable:!1,value:null}),v._store={},Object.defineProperty(v._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(v,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(v,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:wt}),Object.defineProperty(v,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:Je}),Object.freeze&&(Object.freeze(v.props),Object.freeze(v)),v}function b(v,R,B,ne,ze,we,wt,Je){var ie=R.children;if(ie!==void 0)if(ne)if(U(ie)){for(ne=0;ne<ie.length;ne++)y(ie[ne]);Object.freeze&&Object.freeze(ie)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else y(ie);if(Z.call(R,"key")){ie=e(v);var $e=Object.keys(R).filter(function(cr){return cr!=="key"});ne=0<$e.length?"{key: someKey, "+$e.join(": ..., ")+": ...}":"{key: someKey}",Ze[ie+ne]||($e=0<$e.length?"{"+$e.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ne,ie,$e,ie),Ze[ie+ne]=!0)}if(ie=null,B!==void 0&&(r(B),ie=""+B),o(R)&&(r(R.key),ie=""+R.key),"key"in R){B={};for(var Xe in R)Xe!=="key"&&(B[Xe]=R[Xe])}else B=R;return ie&&c(B,typeof v=="function"?v.displayName||v.name||"Unknown":v),p(v,ie,we,ze,n(),B,wt,Je)}function y(v){typeof v=="object"&&v!==null&&v.$$typeof===j&&v._store&&(v._store.validated=1)}var l=T,j=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),$=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),le=Symbol.for("react.client.reference"),de=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=Object.prototype.hasOwnProperty,U=Array.isArray,Q=console.createTask?console.createTask:function(){return null};l={"react-stack-bottom-frame":function(v){return v()}};var ae,fe={},xe=l["react-stack-bottom-frame"].bind(l,i)(),Ue=Q(s(i)),Ze={};jt.Fragment=x,jt.jsx=function(v,R,B,ne,ze){var we=1e4>de.recentlyCreatedOwnerStacks++;return b(v,R,B,!1,ne,ze,we?Error("react-stack-top-frame"):xe,we?Q(s(v)):Ue)},jt.jsxs=function(v,R,B,ne,ze){var we=1e4>de.recentlyCreatedOwnerStacks++;return b(v,R,B,!0,ne,ze,we?Error("react-stack-top-frame"):xe,we?Q(s(v)):Ue)}}()),jt}process.env.NODE_ENV==="production"?gr.exports=Mn():gr.exports=qn();var a=gr.exports;function Ks(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=Ks(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function lt(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=Ks(e))&&(s&&(s+=" "),s+=t);return s}const Xr=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,es=lt,Qn=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return es(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:i}=t,o=Object.keys(n).map(p=>{const b=r==null?void 0:r[p],y=i==null?void 0:i[p];if(b===null)return null;const l=Xr(b)||Xr(y);return n[p][l]}),c=r&&Object.entries(r).reduce((p,b)=>{let[y,l]=b;return l===void 0||(p[y]=l),p},{}),h=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((p,b)=>{let{class:y,className:l,...j}=b;return Object.entries(j).every(E=>{let[x,z]=E;return Array.isArray(z)?z.includes({...i,...c}[x]):{...i,...c}[x]===z})?[...p,y,l]:p},[]);return es(e,o,h,r==null?void 0:r.class,r==null?void 0:r.className)},Bn=Qn("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background select-none",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-600",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 focus:ring-gray-500",ghost:"hover:bg-gray-100 focus:ring-gray-500"},size:{default:"h-10 py-2 px-4",sm:"h-8 px-3 text-sm",lg:"h-12 px-6 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),J=T.forwardRef(({className:e,variant:t,size:r,...s},n)=>a.jsx("button",{className:lt(Bn({variant:t,size:r,className:e})),ref:n,...s}));J.displayName="Button";const Ge=T.forwardRef(({className:e,type:t="text",error:r,label:s,id:n,...i},o)=>{const c=n||`input-${Math.random().toString(36).substr(2,9)}`,h=r?`${c}-error`:void 0;return a.jsxs("div",{className:"w-full",children:[s&&a.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsx("input",{id:c,type:t,className:lt("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50",r&&"border-red-500 focus:ring-red-600",e),"aria-invalid":r?"true":"false","aria-describedby":h,ref:o,...i}),r&&a.jsx("p",{id:h,role:"alert","aria-live":"polite",className:"mt-1 text-sm text-red-600",children:r})]})});Ge.displayName="Input";const at=T.forwardRef(({className:e,...t},r)=>a.jsx("label",{ref:r,className:lt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));at.displayName="Label";const Kt=({className:e,variant:t="default",...r})=>{const s={default:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800"};return a.jsx("span",{className:lt("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium","border border-current border-opacity-20",s[t],e),role:r.role||"status",...r})},Pr=({className:e,size:t="md",...r})=>{const s={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return a.jsx("div",{className:lt("animate-spin rounded-full border-2 border-gray-300 border-t-blue-600",s[t],e),...r})},Er=T.forwardRef(({className:e,error:t,children:r,...s},n)=>a.jsxs("div",{className:"w-full",children:[a.jsx("select",{className:lt("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t&&"border-red-500 focus-visible:ring-red-500",e),ref:n,...s,children:r}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:t})]}));Er.displayName="Select";const Hs=({children:e})=>{const[t,r]=T.useState(!1),[s,n]=T.useState(null);return T.useEffect(()=>{r(!0);let i=document.getElementById("portal-root");return i||(i=document.createElement("div"),i.id="portal-root",document.body.appendChild(i)),n(i),()=>r(!1)},[]),!t||!s?null:Vn.createPortal(e,s)};class Nr extends T.Component{constructor(t){super(t),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),this.setState({error:t,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-6",children:a.jsxs("div",{className:"text-center space-y-6 max-w-md",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:a.jsx(Y.AlertTriangle,{className:"w-8 h-8 text-red-600"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600",children:"We're sorry, but something unexpected happened. Please try refreshing the page or go back to the homepage."})]}),this.props.showDetails&&this.state.error&&a.jsxs("details",{className:"text-left bg-gray-100 p-4 rounded-lg",children:[a.jsx("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 mb-2",children:"Error Details"}),a.jsxs("pre",{className:"text-xs text-red-600 whitespace-pre-wrap overflow-auto",children:[this.state.error.message,this.state.error.stack]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[a.jsxs(J,{onClick:this.handleRetry,variant:"outline",children:[a.jsx(Y.RefreshCw,{className:"w-4 h-4 mr-2"}),"Try Again"]}),a.jsxs(J,{onClick:this.handleGoHome,children:[a.jsx(Y.Home,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}const Gs=({isOpen:e,onClose:t,title:r,children:s,size:n="md"})=>{if(T.useEffect(()=>{const o=c=>{c.key==="Escape"&&t()};if(e){document.addEventListener("keydown",o),document.body.style.overflow="hidden";const c=document.getElementById("modal-dialog");c&&c.focus()}return()=>{document.removeEventListener("keydown",o),document.body.style.overflow="unset"}},[e,t]),!e)return null;const i={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return a.jsx(Hs,{children:a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":r?"modal-title":void 0,children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t,"aria-hidden":"true"}),a.jsxs("div",{id:"modal-dialog",className:`relative bg-white rounded-lg shadow-lg w-full ${i[n]} max-h-[90vh] overflow-hidden focus:outline-none`,tabIndex:-1,children:[r&&a.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[a.jsx("h2",{id:"modal-title",className:"text-xl font-semibold",children:r}),a.jsx(J,{variant:"ghost",size:"sm",onClick:t,className:"p-1 h-auto","aria-label":"Close dialog",children:a.jsx(Y.X,{className:"w-5 h-5","aria-hidden":"true"})})]}),a.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",role:"document",children:s})]})]})})},Ys=({onSearch:e,placeholder:t="Search products..."})=>{const[r,s]=T.useState(""),[n,i]=T.useState(!1),[o,c]=T.useState(-1),[h]=Un.useDebounce(r,300),{data:p=[],isLoading:b}=Ye.useProductSuggestions(h,n&&h.length>2),y="search-combobox",l="search-listbox",j=S=>{S.preventDefault(),r.trim()&&(e(r.trim()),i(!1),c(-1))},E=S=>{s(S),e(S),i(!1),c(-1)},x=()=>{s(""),e(""),i(!1),c(-1)},z=S=>{if(!(!n||p.length===0))switch(S.key){case"ArrowDown":S.preventDefault(),c(w=>w<p.length-1?w+1:0);break;case"ArrowUp":S.preventDefault(),c(w=>w>0?w-1:p.length-1);break;case"Enter":S.preventDefault(),o>=0?E(p[o]):r.trim()&&j(S);break;case"Escape":i(!1),c(-1);break}};return T.useEffect(()=>{const S=w=>{w.target.closest("[data-search-container]")||i(!1)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[]),a.jsxs("div",{className:"relative w-full max-w-md","data-search-container":!0,children:[a.jsxs("form",{onSubmit:j,className:"flex",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Ge,{id:y,value:r,onChange:S=>{s(S.target.value),i(!0),c(-1)},onKeyDown:z,placeholder:t,className:"pr-8",onFocus:()=>r.length>2&&i(!0),role:"combobox","aria-expanded":n&&p.length>0,"aria-haspopup":"listbox","aria-owns":l,"aria-activedescendant":o>=0?`suggestion-${o}`:void 0,"aria-autocomplete":"list","aria-label":"Search for products"}),r&&a.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:x,className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 p-0","aria-label":"Clear search",children:a.jsx(Y.X,{className:"w-4 h-4","aria-hidden":"true"})})]}),a.jsxs(J,{type:"submit",className:"ml-2","aria-label":"Search",children:[a.jsx(Y.Search,{className:"w-4 h-4","aria-hidden":"true"}),a.jsx("span",{className:"sr-only",children:"Search"})]})]}),n&&r.length>2&&a.jsx("div",{id:l,role:"listbox","aria-label":"Search suggestions",className:"absolute top-full left-0 right-0 z-10 mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:b?a.jsx("div",{className:"p-3 text-center text-gray-500",role:"status","aria-live":"polite",children:"Loading suggestions..."}):p.length>0?p.map((S,w)=>a.jsx("button",{id:`suggestion-${w}`,onClick:()=>E(S),className:`w-full text-left px-4 py-2 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none ${w===o?"bg-gray-100":""}`,role:"option","aria-selected":w===o,children:S},w)):a.jsx("div",{className:"p-3 text-center text-gray-500",role:"status",children:"No suggestions found"})})]})},Js=({strength:e})=>{const t=s=>s<50?"bg-red-500":s<80?"bg-yellow-500":"bg-green-500",r=s=>s<50?"Weak":s<80?"Medium":"Strong";return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Password Strength"}),a.jsx("span",{className:"font-medium",children:r(e.percentage)})]}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-300 ${t(e.percentage)}`,style:{width:`${e.percentage}%`}})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Requirements:"}),e.rules.map((s,n)=>a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center ${s.met?"bg-green-500 text-white":"bg-gray-300"}`,children:s.met&&a.jsx("span",{className:"text-xs",children:"✓"})}),a.jsx("span",{className:s.met?"text-green-700":"text-gray-600",children:s.name})]},n))]})]})},Wn=()=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:a.jsx(Y.ShoppingCart,{className:"w-8 h-8 text-red-600"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Cart Error"}),a.jsx("p",{className:"text-gray-600",children:"We're having trouble loading your cart. Please try again."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[a.jsxs(J,{variant:"outline",onClick:()=>window.location.reload(),children:[a.jsx(Y.RefreshCw,{className:"w-4 h-4 mr-2"}),"Refresh Cart"]}),a.jsx(J,{onClick:()=>window.location.href="/products",children:"Continue Shopping"})]})]}),Kn=({children:e})=>a.jsx(Nr,{fallback:a.jsx(Wn,{}),children:e}),Hn=()=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center space-y-4",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:a.jsx(Y.Package,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Product Loading Error"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Unable to load product information. Please try refreshing the page."})]}),a.jsxs(J,{size:"sm",variant:"outline",onClick:()=>window.location.reload(),children:[a.jsx(Y.RefreshCw,{className:"w-4 h-4 mr-2"}),"Retry"]})]}),Xs=({children:e})=>a.jsx(Nr,{fallback:a.jsx(Hn,{}),children:e}),en=()=>{const e=Ws.usePathname(),{data:t}=Ye.useCart(),r=[{href:"/products",label:"Products",icon:Y.Package},{href:"/cart",label:"Cart",icon:Y.ShoppingCart},{href:"/profile",label:"Profile",icon:Y.User}];return a.jsx("header",{role:"banner",className:"bg-white shadow-sm border-b","aria-label":"Site header",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx(Gr,{href:"/",className:"font-bold text-xl text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 rounded","aria-label":"FruitShop home page",children:"FruitShop"}),a.jsx("nav",{role:"navigation","aria-label":"Main navigation",className:"flex items-center space-x-4",children:r.map(({href:s,label:n,icon:i})=>{const o=e===s,c=s==="/cart",h=(t==null?void 0:t.totalItems)||0;return a.jsxs(Gr,{href:s,className:`flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 ${o?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,"aria-label":c&&h>0?`${n} (${h} items)`:n,"aria-current":o?"page":void 0,children:[a.jsxs("div",{className:"relative",children:[a.jsx(i,{className:"w-4 h-4","aria-hidden":"true"}),c&&h>0&&a.jsx(Kt,{variant:"danger",className:"absolute -top-2 -right-10 min-w-[1.2rem] h-4 text-xs flex items-center justify-center p-0 transform translate-x-1/2 -translate-y-1/2","aria-label":`${h} items in cart`,children:h})]}),a.jsx("span",{children:n})]},s)})})]})})})},tn=({product:e})=>{const[t,r]=T.useState(e.packageSize),[s,n]=T.useState(!1),{data:i}=Ye.useCart(),{mutate:o,isPending:c}=Ye.useAddToCart(),h=Et.ProductService.calculateDiscountedPrice(e.price,e.discount),p=i?Et.CartService.getItemQuantityInCart(i,e.id):0,b=e.stock-p,y=Et.ProductService.isValidQuantity(t,e.packageSize),l=y&&t<=b&&b>0,j=S=>{const w=parseInt(S)||0;r(w)},E=()=>{l&&o({productId:e.id,productName:e.name,price:h,quantity:t,image:e.image,packageSize:e.packageSize})},x=()=>{const S=t+e.packageSize;S<=b&&r(S)},z=()=>{const S=t-e.packageSize;S>=e.packageSize&&r(S)};return a.jsxs(a.Fragment,{children:[a.jsxs("article",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2","aria-labelledby":`product-title-${e.id}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx(pr,{src:e.image,alt:`${e.name} - Fresh fruit available in ${e.colors.join(", ")} colors`,width:400,height:300,className:"w-full h-48 object-cover",priority:!1}),e.discount>0&&a.jsxs(Kt,{variant:"danger",className:"absolute top-2 right-2","aria-label":`${e.discount}% discount`,children:[e.discount,"% OFF"]})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{id:`product-title-${e.id}`,className:"font-semibold text-lg",children:e.name}),a.jsx("div",{className:"flex items-center space-x-2 mt-1","aria-label":"Available colors",children:e.colors.map(S=>a.jsx("div",{className:`w-4 h-4 rounded-full ${S==="green"?"bg-green-500":S==="orange"?"bg-orange-500":"bg-yellow-500"}`,"aria-label":`${S} color option`,role:"img"},S))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2","aria-label":"Price information",children:[a.jsxs("span",{className:"text-lg font-bold",children:["$",h.toFixed(2)]}),e.discount>0&&a.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",e.price.toFixed(2)]})]}),a.jsx(J,{variant:"ghost",size:"sm",onClick:()=>n(!0),"aria-label":`View details for ${e.name}`,children:a.jsx(Y.Eye,{className:"w-4 h-4","aria-hidden":"true"})})]}),a.jsxs("div",{className:"text-sm text-gray-600","aria-label":"Product information",children:[a.jsxs("p",{children:["Stock: ",a.jsx("span",{"aria-label":`${b} units available`,children:b})]}),a.jsxs("p",{children:["Package: ",a.jsxs("span",{"aria-label":`Sold in packages of ${e.packageSize} units`,children:[e.packageSize," units"]})]})]}),a.jsxs("fieldset",{className:"flex items-center space-x-2",children:[a.jsx("legend",{className:"sr-only",children:"Select quantity"}),a.jsx(J,{variant:"outline",size:"sm",onClick:z,disabled:t<=e.packageSize,"aria-label":`Decrease quantity by ${e.packageSize}`,children:"-"}),a.jsx(Ge,{type:"number",value:t,onChange:S=>j(S.target.value),className:"w-20 text-center",min:e.packageSize,step:e.packageSize,"aria-label":"Quantity","aria-describedby":`quantity-help-${e.id}`}),a.jsx(J,{variant:"outline",size:"sm",onClick:x,disabled:t+e.packageSize>b,"aria-label":`Increase quantity by ${e.packageSize}`,children:"+"}),a.jsxs("div",{id:`quantity-help-${e.id}`,className:"sr-only",children:["Quantity must be in multiples of ",e.packageSize,". Available stock: ",b]})]}),a.jsxs(J,{onClick:E,disabled:!l||c,className:"w-full","aria-describedby":y?void 0:`quantity-error-${e.id}`,children:[a.jsx(Y.ShoppingCart,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),c?"Adding to cart...":`Add ${t} ${t===1?"unit":"units"} to Cart`]}),!y&&a.jsxs("p",{id:`quantity-error-${e.id}`,role:"alert",className:"text-sm text-red-600",children:["Quantity must be a multiple of ",e.packageSize]})]})]}),a.jsx(Gs,{isOpen:s,onClose:()=>n(!1),title:`${e.name} - Product Details`,size:"lg",children:a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx(pr,{src:e.image,alt:`Detailed view of ${e.name} - Fresh fruit`,width:600,height:400,className:"w-full h-64 object-cover rounded-lg"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-2xl font-bold",children:e.name}),a.jsxs("div",{className:"flex items-center space-x-2","aria-label":"Price information",children:[a.jsxs("span",{className:"text-2xl font-bold",children:["$",h.toFixed(2)]}),e.discount>0&&a.jsxs("span",{className:"text-lg text-gray-500 line-through","aria-label":`Original price $${e.price.toFixed(2)}`,children:["$",e.price.toFixed(2)]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-medium",children:"Available colors:"}),e.colors.map(S=>a.jsx("div",{className:`w-6 h-6 rounded-full ${S==="green"?"bg-green-500":S==="orange"?"bg-orange-500":"bg-yellow-500"}`,"aria-label":`${S} color option`,role:"img"},S))]}),e.discount>0&&a.jsxs(Kt,{variant:"danger","aria-label":`${e.discount}% discount applied`,children:[e.discount,"% OFF"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Stock:"})," ",e.stock," units"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Package Size:"})," ",e.packageSize," units"]})]}),a.jsx("p",{className:"text-gray-700",children:e.description})]})]})})]})},rn=({filters:e,onFiltersChange:t})=>{const r=[{value:"green",label:"Green"},{value:"orange",label:"Orange"},{value:"yellow",label:"Yellow"}],s=[{value:"name-asc",label:"Alphabetically (A-Z)"},{value:"name-desc",label:"Alphabetically (Z-A)"},{value:"price-asc",label:"Price (Low-High)"},{value:"price-desc",label:"Price (High-Low)"},{value:"discount-desc",label:"Discount (Highest first)"}],n=c=>{const h=e.colors.includes(c)?e.colors.filter(p=>p!==c):[...e.colors,c];t({...e,colors:h})},i=c=>{t({...e,sortOrder:c})},o=()=>{t({colors:[],sortOrder:"name-asc",searchQuery:e.searchQuery})};return a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"sort",children:"Sort By"}),a.jsx(Er,{id:"sort",value:e.sortOrder,onChange:c=>i(c.target.value),children:s.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{children:"Filter by Color"}),a.jsx("div",{className:"space-y-2",children:r.map(c=>a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.colors.includes(c.value),onChange:()=>n(c.value),className:"rounded border-gray-300"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-4 h-4 rounded-full ${c.value==="green"?"bg-green-500":c.value==="orange"?"bg-orange-500":"bg-yellow-500"}`}),a.jsx("span",{children:c.label})]})]},c.value))})]}),a.jsx(J,{variant:"outline",onClick:o,className:"w-full",children:"Clear Filters"})]})};class Gn extends T.Component{constructor(t){super(t),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Global ErrorBoundary caught an error:",t,r)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"text-center space-y-8 max-w-lg",children:[a.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:a.jsx(Y.AlertTriangle,{className:"w-10 h-10 text-red-600"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Oops! Something went wrong"}),a.jsx("p",{className:"text-lg text-gray-600",children:"We're experiencing technical difficulties with FruitShop. Our team has been notified and is working to fix this issue."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs("button",{onClick:this.handleRetry,className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-md shadow-sm text-base font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[a.jsx(Y.RefreshCw,{className:"w-5 h-5 mr-2"}),"Reload Page"]}),a.jsxs("button",{onClick:this.handleGoHome,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[a.jsx(Y.Home,{className:"w-5 h-5 mr-2"}),"Go to Homepage"]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:a.jsx("p",{className:"text-sm text-gray-500",children:"If this problem persists, please contact our support team."})})]})}):this.props.children}}var tr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rr=typeof window>"u"||"Deno"in globalThis;function ke(){}function Yn(e,t){return typeof e=="function"?e(t):e}function Jn(e){return typeof e=="number"&&e>=0&&e!==1/0}function Xn(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yr(e,t){return typeof e=="function"?e(t):e}function ei(e,t){return typeof e=="function"?e(t):e}function ts(e,t){const{type:r="all",exact:s,fetchStatus:n,predicate:i,queryKey:o,stale:c}=e;if(o){if(s){if(t.queryHash!==zr(o,t.options))return!1}else if(!At(t.queryKey,o))return!1}if(r!=="all"){const h=t.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||n&&n!==t.state.fetchStatus||i&&!i(t))}function rs(e,t){const{exact:r,status:s,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ct(t.options.mutationKey)!==Ct(i))return!1}else if(!At(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function zr(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ct)(e)}function Ct(e){return JSON.stringify(e,(t,r)=>br(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function At(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>At(e[r],t[r])):!1}function vr(e,t){if(e===t)return e;const r=ss(e)&&ss(t);if(r||br(e)&&br(t)){const s=r?e:Object.keys(e),n=s.length,i=r?t:Object.keys(t),o=i.length,c=r?[]:{},h=new Set(s);let p=0;for(let b=0;b<o;b++){const y=r?b:i[b];(!r&&h.has(y)||r)&&e[y]===void 0&&t[y]===void 0?(c[y]=void 0,p++):(c[y]=vr(e[y],t[y]),c[y]===e[y]&&e[y]!==void 0&&p++)}return n===o&&p===n?e:c}return t}function ss(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function br(e){if(!ns(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!ns(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ns(e){return Object.prototype.toString.call(e)==="[object Object]"}function ti(e){return new Promise(t=>{setTimeout(t,e)})}function ri(e,t,r){if(typeof r.structuralSharing=="function")return r.structuralSharing(e,t);if(r.structuralSharing!==!1){if(process.env.NODE_ENV!=="production")try{return vr(e,t)}catch(s){throw console.error(`Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${r.queryHash}]: ${s}`),s}return vr(e,t)}return t}function si(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function ni(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var Ht=Symbol();function sn(e,t){return process.env.NODE_ENV!=="production"&&e.queryFn===Ht&&console.error(`Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${e.queryHash}'`),!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ht?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var tt,Qe,ht,Is,ii=(Is=class extends tr{constructor(){super();V(this,tt);V(this,Qe);V(this,ht);O(this,ht,t=>{if(!rr&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){m(this,Qe)||this.setEventListener(m(this,ht))}onUnsubscribe(){var t;this.hasListeners()||((t=m(this,Qe))==null||t.call(this),O(this,Qe,void 0))}setEventListener(t){var r;O(this,ht,t),(r=m(this,Qe))==null||r.call(this),O(this,Qe,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){m(this,tt)!==t&&(O(this,tt,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof m(this,tt)=="boolean"?m(this,tt):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},tt=new WeakMap,Qe=new WeakMap,ht=new WeakMap,Is),nn=new ii,mt,Be,pt,Vs,oi=(Vs=class extends tr{constructor(){super();V(this,mt,!0);V(this,Be);V(this,pt);O(this,pt,t=>{if(!rr&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){m(this,Be)||this.setEventListener(m(this,pt))}onUnsubscribe(){var t;this.hasListeners()||((t=m(this,Be))==null||t.call(this),O(this,Be,void 0))}setEventListener(t){var r;O(this,pt,t),(r=m(this,Be))==null||r.call(this),O(this,Be,t(this.setOnline.bind(this)))}setOnline(t){m(this,mt)!==t&&(O(this,mt,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return m(this,mt)}},mt=new WeakMap,Be=new WeakMap,pt=new WeakMap,Vs),Gt=new oi;function ai(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},r.reject=n=>{s({status:"rejected",reason:n}),t(n)},r}function ci(e){return Math.min(1e3*2**e,3e4)}function on(e){return(e??"online")==="online"?Gt.isOnline():!0}var an=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function fr(e){return e instanceof an}function cn(e){let t=!1,r=0,s=!1,n;const i=ai(),o=x=>{var z;s||(l(new an(x)),(z=e.abort)==null||z.call(e))},c=()=>{t=!0},h=()=>{t=!1},p=()=>nn.isFocused()&&(e.networkMode==="always"||Gt.isOnline())&&e.canRun(),b=()=>on(e.networkMode)&&e.canRun(),y=x=>{var z;s||(s=!0,(z=e.onSuccess)==null||z.call(e,x),n==null||n(),i.resolve(x))},l=x=>{var z;s||(s=!0,(z=e.onError)==null||z.call(e,x),n==null||n(),i.reject(x))},j=()=>new Promise(x=>{var z;n=S=>{(s||p())&&x(S)},(z=e.onPause)==null||z.call(e)}).then(()=>{var x;n=void 0,s||(x=e.onContinue)==null||x.call(e)}),E=()=>{if(s)return;let x;const z=r===0?e.initialPromise:void 0;try{x=z??e.fn()}catch(S){x=Promise.reject(S)}Promise.resolve(x).then(y).catch(S=>{var ee;if(s)return;const w=e.retry??(rr?0:3),$=e.retryDelay??ci,A=typeof $=="function"?$(r,S):$,D=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,S);if(t||!D){l(S);return}r++,(ee=e.onFail)==null||ee.call(e,r,S),ti(A).then(()=>p()?void 0:j()).then(()=>{t?l(S):E()})})};return{promise:i,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:c,continueRetry:h,canStart:b,start:()=>(b()?E():j().then(E),i)}}var ui=e=>setTimeout(e,0);function li(){let e=[],t=0,r=c=>{c()},s=c=>{c()},n=ui;const i=c=>{t?e.push(c):n(()=>{r(c)})},o=()=>{const c=e;e=[],c.length&&n(()=>{s(()=>{c.forEach(h=>{r(h)})})})};return{batch:c=>{let h;t++;try{h=c()}finally{t--,t||o()}return h},batchCalls:c=>(...h)=>{i(()=>{c(...h)})},schedule:i,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{n=c}}}var ye=li(),rt,Us,un=(Us=class{constructor(){V(this,rt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Jn(this.gcTime)&&O(this,rt,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(rr?1/0:5*60*1e3))}clearGcTimeout(){m(this,rt)&&(clearTimeout(m(this,rt)),O(this,rt,void 0))}},rt=new WeakMap,Us),gt,st,je,nt,me,Rt,it,Se,Ie,Ls,di=(Ls=class extends un{constructor(t){super();V(this,Se);V(this,gt);V(this,st);V(this,je);V(this,nt);V(this,me);V(this,Rt);V(this,it);O(this,it,!1),O(this,Rt,t.defaultOptions),this.setOptions(t.options),this.observers=[],O(this,nt,t.client),O(this,je,m(this,nt).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,O(this,gt,hi(this.options)),this.state=t.state??m(this,gt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=m(this,me))==null?void 0:t.promise}setOptions(t){this.options={...m(this,Rt),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&m(this,je).remove(this)}setData(t,r){const s=ri(this.state.data,t,this.options);return he(this,Se,Ie).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){he(this,Se,Ie).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,n;const r=(s=m(this,me))==null?void 0:s.promise;return(n=m(this,me))==null||n.cancel(t),r?r.then(ke).catch(ke):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(m(this,gt))}isActive(){return this.observers.some(t=>ei(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ht||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>yr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Xn(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=m(this,me))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=m(this,me))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),m(this,je).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(m(this,me)&&(m(this,it)?m(this,me).cancel({revert:!0}):m(this,me).cancelRetry()),this.scheduleGc()),m(this,je).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||he(this,Se,Ie).call(this,{type:"invalidate"})}fetch(t,r){var p,b,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(m(this,me))return m(this,me).continueRetry(),m(this,me).promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(j=>j.options.queryFn);l&&this.setOptions(l.options)}process.env.NODE_ENV!=="production"&&(Array.isArray(this.options.queryKey)||console.error("As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']"));const s=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(O(this,it,!0),s.signal)})},i=()=>{const l=sn(this.options,r),E=(()=>{const x={client:m(this,nt),queryKey:this.queryKey,meta:this.meta};return n(x),x})();return O(this,it,!1),this.options.persister?this.options.persister(l,E,this):l(E)},c=(()=>{const l={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:m(this,nt),state:this.state,fetchFn:i};return n(l),l})();(p=this.options.behavior)==null||p.onFetch(c,this),O(this,st,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((b=c.fetchOptions)==null?void 0:b.meta))&&he(this,Se,Ie).call(this,{type:"fetch",meta:(y=c.fetchOptions)==null?void 0:y.meta});const h=l=>{var j,E,x,z;fr(l)&&l.silent||he(this,Se,Ie).call(this,{type:"error",error:l}),fr(l)||((E=(j=m(this,je).config).onError)==null||E.call(j,l,this),(z=(x=m(this,je).config).onSettled)==null||z.call(x,this.state.data,l,this)),this.scheduleGc()};return O(this,me,cn({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:l=>{var j,E,x,z;if(l===void 0){process.env.NODE_ENV!=="production"&&console.error(`Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`),h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(S){h(S);return}(E=(j=m(this,je).config).onSuccess)==null||E.call(j,l,this),(z=(x=m(this,je).config).onSettled)==null||z.call(x,l,this.state.error,this),this.scheduleGc()},onError:h,onFail:(l,j)=>{he(this,Se,Ie).call(this,{type:"failed",failureCount:l,error:j})},onPause:()=>{he(this,Se,Ie).call(this,{type:"pause"})},onContinue:()=>{he(this,Se,Ie).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),m(this,me).start()}},gt=new WeakMap,st=new WeakMap,je=new WeakMap,nt=new WeakMap,me=new WeakMap,Rt=new WeakMap,it=new WeakMap,Se=new WeakSet,Ie=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...fi(s.data,this.options),fetchMeta:t.meta??null};case"success":return O(this,st,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return fr(n)&&n.revert&&m(this,st)?{...m(this,st),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),ye.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),m(this,je).notify({query:this,type:"updated",action:t})})},Ls);function fi(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:on(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function hi(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ae,Ms,mi=(Ms=class extends tr{constructor(t={}){super();V(this,Ae);this.config=t,O(this,Ae,new Map)}build(t,r,s){const n=r.queryKey,i=r.queryHash??zr(n,r);let o=this.get(i);return o||(o=new di({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){m(this,Ae).has(t.queryHash)||(m(this,Ae).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=m(this,Ae).get(t.queryHash);r&&(t.destroy(),r===t&&m(this,Ae).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ye.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return m(this,Ae).get(t)}getAll(){return[...m(this,Ae).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>ts(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>ts(t,s)):r}notify(t){ye.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ye.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ye.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ae=new WeakMap,Ms),Fe,pe,ot,Oe,Me,qs,pi=(qs=class extends un{constructor(t){super();V(this,Oe);V(this,Fe);V(this,pe);V(this,ot);this.mutationId=t.mutationId,O(this,pe,t.mutationCache),O(this,Fe,[]),this.state=t.state||gi(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){m(this,Fe).includes(t)||(m(this,Fe).push(t),this.clearGcTimeout(),m(this,pe).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){O(this,Fe,m(this,Fe).filter(r=>r!==t)),this.scheduleGc(),m(this,pe).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){m(this,Fe).length||(this.state.status==="pending"?this.scheduleGc():m(this,pe).remove(this))}continue(){var t;return((t=m(this,ot))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,c,h,p,b,y,l,j,E,x,z,S,w,$,A,D,ee,oe,ve;const r=()=>{he(this,Oe,Me).call(this,{type:"continue"})};O(this,ot,cn({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,le)=>{he(this,Oe,Me).call(this,{type:"failed",failureCount:I,error:le})},onPause:()=>{he(this,Oe,Me).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>m(this,pe).canRun(this)}));const s=this.state.status==="pending",n=!m(this,ot).canStart();try{if(s)r();else{he(this,Oe,Me).call(this,{type:"pending",variables:t,isPaused:n}),await((o=(i=m(this,pe).config).onMutate)==null?void 0:o.call(i,t,this));const le=await((h=(c=this.options).onMutate)==null?void 0:h.call(c,t));le!==this.state.context&&he(this,Oe,Me).call(this,{type:"pending",context:le,variables:t,isPaused:n})}const I=await m(this,ot).start();return await((b=(p=m(this,pe).config).onSuccess)==null?void 0:b.call(p,I,t,this.state.context,this)),await((l=(y=this.options).onSuccess)==null?void 0:l.call(y,I,t,this.state.context)),await((E=(j=m(this,pe).config).onSettled)==null?void 0:E.call(j,I,null,this.state.variables,this.state.context,this)),await((z=(x=this.options).onSettled)==null?void 0:z.call(x,I,null,t,this.state.context)),he(this,Oe,Me).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(S=m(this,pe).config).onError)==null?void 0:w.call(S,I,t,this.state.context,this)),await((A=($=this.options).onError)==null?void 0:A.call($,I,t,this.state.context)),await((ee=(D=m(this,pe).config).onSettled)==null?void 0:ee.call(D,void 0,I,this.state.variables,this.state.context,this)),await((ve=(oe=this.options).onSettled)==null?void 0:ve.call(oe,void 0,I,t,this.state.context)),I}finally{he(this,Oe,Me).call(this,{type:"error",error:I})}}finally{m(this,pe).runNext(this)}}},Fe=new WeakMap,pe=new WeakMap,ot=new WeakMap,Oe=new WeakSet,Me=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ye.batch(()=>{m(this,Fe).forEach(s=>{s.onMutationUpdate(t)}),m(this,pe).notify({mutation:this,type:"updated",action:t})})},qs);function gi(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ve,Pe,Dt,Qs,yi=(Qs=class extends tr{constructor(t={}){super();V(this,Ve);V(this,Pe);V(this,Dt);this.config=t,O(this,Ve,new Set),O(this,Pe,new Map),O(this,Dt,0)}build(t,r,s){const n=new pi({mutationCache:this,mutationId:++Vt(this,Dt)._,options:t.defaultMutationOptions(r),state:s});return this.add(n),n}add(t){m(this,Ve).add(t);const r=Ut(t);if(typeof r=="string"){const s=m(this,Pe).get(r);s?s.push(t):m(this,Pe).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(m(this,Ve).delete(t)){const r=Ut(t);if(typeof r=="string"){const s=m(this,Pe).get(r);if(s)if(s.length>1){const n=s.indexOf(t);n!==-1&&s.splice(n,1)}else s[0]===t&&m(this,Pe).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Ut(t);if(typeof r=="string"){const s=m(this,Pe).get(r),n=s==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){var s;const r=Ut(t);if(typeof r=="string"){const n=(s=m(this,Pe).get(r))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ye.batch(()=>{m(this,Ve).forEach(t=>{this.notify({type:"removed",mutation:t})}),m(this,Ve).clear(),m(this,Pe).clear()})}getAll(){return Array.from(m(this,Ve))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>rs(r,s))}findAll(t={}){return this.getAll().filter(r=>rs(t,r))}notify(t){ye.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ye.batch(()=>Promise.all(t.map(r=>r.continue().catch(ke))))}},Ve=new WeakMap,Pe=new WeakMap,Dt=new WeakMap,Qs);function Ut(e){var t;return(t=e.options.scope)==null?void 0:t.id}function is(e){return{onFetch:(t,r)=>{var b,y,l,j,E;const s=t.options,n=(l=(y=(b=t.fetchOptions)==null?void 0:b.meta)==null?void 0:y.fetchMore)==null?void 0:l.direction,i=((j=t.state.data)==null?void 0:j.pages)||[],o=((E=t.state.data)==null?void 0:E.pageParams)||[];let c={pages:[],pageParams:[]},h=0;const p=async()=>{let x=!1;const z=$=>{Object.defineProperty($,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},S=sn(t.options,t.fetchOptions),w=async($,A,D)=>{if(x)return Promise.reject();if(A==null&&$.pages.length)return Promise.resolve($);const oe=(()=>{const de={client:t.client,queryKey:t.queryKey,pageParam:A,direction:D?"backward":"forward",meta:t.options.meta};return z(de),de})(),ve=await S(oe),{maxPages:I}=t.options,le=D?ni:si;return{pages:le($.pages,ve,I),pageParams:le($.pageParams,A,I)}};if(n&&i.length){const $=n==="backward",A=$?vi:os,D={pages:i,pageParams:o},ee=A(s,D);c=await w(D,ee,$)}else{const $=e??i.length;do{const A=h===0?o[0]??s.initialPageParam:os(s,c);if(h>0&&A==null)break;c=await w(c,A),h++}while(h<$)}return c};t.options.persister?t.fetchFn=()=>{var x,z;return(z=(x=t.options).persister)==null?void 0:z.call(x,p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=p}}}function os(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function vi(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var G,We,Ke,yt,vt,He,bt,xt,Bs,bi=(Bs=class{constructor(e={}){V(this,G);V(this,We);V(this,Ke);V(this,yt);V(this,vt);V(this,He);V(this,bt);V(this,xt);O(this,G,e.queryCache||new mi),O(this,We,e.mutationCache||new yi),O(this,Ke,e.defaultOptions||{}),O(this,yt,new Map),O(this,vt,new Map),O(this,He,0)}mount(){Vt(this,He)._++,m(this,He)===1&&(O(this,bt,nn.subscribe(async e=>{e&&(await this.resumePausedMutations(),m(this,G).onFocus())})),O(this,xt,Gt.subscribe(async e=>{e&&(await this.resumePausedMutations(),m(this,G).onOnline())})))}unmount(){var e,t;Vt(this,He)._--,m(this,He)===0&&((e=m(this,bt))==null||e.call(this),O(this,bt,void 0),(t=m(this,xt))==null||t.call(this),O(this,xt,void 0))}isFetching(e){return m(this,G).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return m(this,We).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=m(this,G).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=m(this,G).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(yr(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return m(this,G).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),n=m(this,G).get(s.queryHash),i=n==null?void 0:n.state.data,o=Yn(t,i);if(o!==void 0)return m(this,G).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return ye.batch(()=>m(this,G).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=m(this,G).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=m(this,G);ye.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=m(this,G);return ye.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=ye.batch(()=>m(this,G).findAll(e).map(n=>n.cancel(r)));return Promise.all(s).then(ke).catch(ke)}invalidateQueries(e,t={}){return ye.batch(()=>(m(this,G).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=ye.batch(()=>m(this,G).findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(ke)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ke)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=m(this,G).build(this,t);return r.isStaleByTime(yr(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ke).catch(ke)}fetchInfiniteQuery(e){return e.behavior=is(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ke).catch(ke)}ensureInfiniteQueryData(e){return e.behavior=is(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Gt.isOnline()?m(this,We).resumePausedMutations():Promise.resolve()}getQueryCache(){return m(this,G)}getMutationCache(){return m(this,We)}getDefaultOptions(){return m(this,Ke)}setDefaultOptions(e){O(this,Ke,e)}setQueryDefaults(e,t){m(this,yt).set(Ct(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...m(this,yt).values()],r={};return t.forEach(s=>{At(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){m(this,vt).set(Ct(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...m(this,vt).values()],r={};return t.forEach(s=>{At(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...m(this,Ke).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=zr(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ht&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...m(this,Ke).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){m(this,G).clear(),m(this,We).clear()}},G=new WeakMap,We=new WeakMap,Ke=new WeakMap,yt=new WeakMap,vt=new WeakMap,He=new WeakMap,bt=new WeakMap,xt=new WeakMap,Bs),xi=Wt.createContext(void 0),wi=({client:e,children:t})=>(Wt.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(xi.Provider,{value:e,children:t}));const _i=new bi({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:30*1e3,gcTime:10*60*1e3},mutations:{retry:1}}}),ji=({children:e})=>a.jsx(wi,{client:_i,children:a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Skip to main content"}),a.jsx(en,{}),a.jsx("main",{id:"main-content",role:"main",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8","aria-label":"Main content",children:e}),a.jsx("div",{id:"sr-announcements","aria-live":"polite","aria-atomic":"true",className:"sr-only"})]})}),ki=()=>{var y;const{data:e,isLoading:t,error:r}=Ye.useCart(),{mutate:s,isPending:n}=Ye.useRemoveFromCart(),[i,o]=T.useState({}),c=(l,j)=>{const E=Math.max(0,parseInt(j)||0);o(x=>({...x,[l]:E}))},h=(l,j)=>{const E=i[l]||0,x=e==null?void 0:e.items.find(w=>w.productId===l),z=x?x.quantity:0,S=E+j;S<=z&&o(w=>({...w,[l]:S}))},p=(l,j)=>{const E=i[l]||0,x=Math.max(0,E-j);o(z=>({...z,[l]:x}))},b=l=>{const j=i[l]||0;j>0&&(s({productId:l,quantity:j}),o(E=>({...E,[l]:0})))};return t?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Pr,{size:"lg"})}):r?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading cart. Please try again."})}):!e||e.items.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Your Cart"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Your cart is empty"}),a.jsx(J,{onClick:()=>window.location.href="/products",children:"Browse Products"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Your Cart"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[e==null?void 0:e.totalItems," items"]}),a.jsxs("p",{className:"text-2xl font-bold",children:["$",((y=e==null?void 0:e.totalPrice)==null?void 0:y.toFixed(2))??"0.00"]})]})]}),a.jsx("div",{className:"space-y-4",children:e==null?void 0:e.items.map(l=>{const j=i[l.productId]||0,E=j>0&&j<=l.quantity,x=j%l.packageSize===0;return a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx(pr,{src:l.image,alt:l.productName,width:80,height:80,className:"w-20 h-20 object-cover rounded-md"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("h3",{className:"font-semibold text-lg",children:l.productName}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["Price: $",l.price.toFixed(2)," each"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",l.quantity," units"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Package: ",l.packageSize," units"]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"font-bold text-lg",children:["$",(l.price*l.quantity).toFixed(2)]})})]}),a.jsxs("div",{className:"flex items-center space-x-4 pt-4 border-t",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Remove:"}),a.jsx(J,{variant:"outline",size:"sm",onClick:()=>p(l.productId,l.packageSize),disabled:j<=0,children:a.jsx(Y.Minus,{className:"w-3 h-3"})}),a.jsx(Ge,{type:"number",value:j,onChange:z=>c(l.productId,z.target.value),className:"w-20 text-center",min:"0",max:l.quantity,step:l.packageSize}),a.jsx(J,{variant:"outline",size:"sm",onClick:()=>h(l.productId,l.packageSize),disabled:j+l.packageSize>l.quantity,children:a.jsx(Y.Plus,{className:"w-3 h-3"})})]}),a.jsxs(J,{variant:"destructive",size:"sm",onClick:()=>b(l.productId),disabled:!E||!x||n,children:[a.jsx(Y.Trash2,{className:"w-4 h-4 mr-1"}),n?"Removing...":"Remove"]})]}),!x&&j>0&&a.jsxs("p",{className:"text-sm text-red-600",children:["Remove quantity must be a multiple of ",l.packageSize]})]})]})},l.productId)})}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:a.jsxs("div",{className:"flex justify-between items-center text-xl font-bold",children:[a.jsxs("span",{children:["Total: $",e==null?void 0:e.totalPrice.toFixed(2)]}),a.jsx(J,{size:"lg",children:"Proceed to Checkout"})]})})]})},Si=()=>{const e=Ws.useSearchParams(),[t,r]=T.useState({colors:[],sortOrder:"name-asc",searchQuery:""});T.useEffect(()=>{const c=e.get("search")||"";r(h=>({...h,searchQuery:c}))},[e]);const{data:s=[],isLoading:n,error:i}=Ye.useFilteredProducts(t),o=c=>{r(h=>({...h,searchQuery:c}))};return n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Pr,{size:"lg"})}):i?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading products. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Products"}),a.jsxs("p",{className:"text-gray-600",children:[s.length," products found"]})]}),a.jsx("div",{className:"max-w-md",children:a.jsx(Ys,{onSearch:o,placeholder:"Search products..."})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(rn,{filters:t,onFiltersChange:r})}),a.jsx("div",{className:"lg:col-span-3",children:s.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-600",children:"No products found matching your criteria."})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(c=>a.jsx(Xs,{children:a.jsx(tn,{product:c})},c.id))})})]})]})};var Zt=e=>e.type==="checkbox",et=e=>e instanceof Date,ge=e=>e==null;const ln=e=>typeof e=="object";var X=e=>!ge(e)&&!Array.isArray(e)&&ln(e)&&!et(e),Pi=e=>X(e)&&e.target?Zt(e.target)?e.target.checked:e.target.value:e,Ei=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ni=(e,t)=>e.has(Ei(t)),zi=e=>{const t=e.constructor&&e.constructor.prototype;return X(t)&&t.hasOwnProperty("isPrototypeOf")},$r=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ce(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!($r&&(e instanceof Blob||s))&&(r||X(e)))if(t=r?[]:{},!r&&!zi(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=ce(e[n]));else return e;return t}var sr=e=>/^\w*$/.test(e),re=e=>e===void 0,Cr=e=>Array.isArray(e)?e.filter(Boolean):[],Ar=e=>Cr(e.replace(/["|']|\]/g,"").split(/\.|\[/)),N=(e,t,r)=>{if(!t||!X(e))return r;const s=(sr(t)?[t]:Ar(t)).reduce((n,i)=>ge(n)?n:n[i],e);return re(s)||s===e?re(e[t])?r:e[t]:s},Ce=e=>typeof e=="boolean",M=(e,t,r)=>{let s=-1;const n=sr(t)?[t]:Ar(t),i=n.length,o=i-1;for(;++s<i;){const c=n[s];let h=r;if(s!==o){const p=e[c];h=X(p)||Array.isArray(p)?p:isNaN(+n[s+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=h,e=e[c]}};const as={BLUR:"blur",FOCUS_OUT:"focusout"},Ee={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Te={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},$i=T.createContext(null);$i.displayName="HookFormContext";var Ci=(e,t,r,s=!0)=>{const n={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(n,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Ee.all&&(t._proxyFormState[o]=!s||Ee.all),e[o]}});return n};const Ai=typeof window<"u"?Wt.useLayoutEffect:Wt.useEffect;var Re=e=>typeof e=="string",Fi=(e,t,r,s,n)=>Re(e)?(s&&t.watch.add(e),N(r,e,n)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),N(r,i))):(s&&(t.watchAll=!0),r),Fr=(e,t,r,s,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:n||!0}}:{},Nt=e=>Array.isArray(e)?e:[e],cs=()=>{let e=[];return{get observers(){return e},next:n=>{for(const i of e)i.next&&i.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(i=>i!==n)}}),unsubscribe:()=>{e=[]}}},xr=e=>ge(e)||!ln(e);function qe(e,t,r=new WeakSet){if(xr(e)||xr(t))return e===t;if(et(e)&&et(t))return e.getTime()===t.getTime();const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const o=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const c=t[i];if(et(o)&&et(c)||X(o)&&X(c)||Array.isArray(o)&&Array.isArray(c)?!qe(o,c,r):o!==c)return!1}}return!0}var be=e=>X(e)&&!Object.keys(e).length,Or=e=>e.type==="file",Ne=e=>typeof e=="function",Yt=e=>{if(!$r)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},dn=e=>e.type==="select-multiple",Rr=e=>e.type==="radio",Oi=e=>Rr(e)||Zt(e),hr=e=>Yt(e)&&e.isConnected;function Ri(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=re(e)?s++:e[t[s++]];return e}function Di(e){for(const t in e)if(e.hasOwnProperty(t)&&!re(e[t]))return!1;return!0}function te(e,t){const r=Array.isArray(t)?t:sr(t)?[t]:Ar(t),s=r.length===1?e:Ri(e,r),n=r.length-1,i=r[n];return s&&delete s[i],n!==0&&(X(s)&&be(s)||Array.isArray(s)&&Di(s))&&te(e,r.slice(0,-1)),e}var fn=e=>{for(const t in e)if(Ne(e[t]))return!0;return!1};function Jt(e,t={}){const r=Array.isArray(e);if(X(e)||r)for(const s in e)Array.isArray(e[s])||X(e[s])&&!fn(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Jt(e[s],t[s])):ge(e[s])||(t[s]=!0);return t}function hn(e,t,r){const s=Array.isArray(e);if(X(e)||s)for(const n in e)Array.isArray(e[n])||X(e[n])&&!fn(e[n])?re(t)||xr(r[n])?r[n]=Array.isArray(e[n])?Jt(e[n],[]):{...Jt(e[n])}:hn(e[n],ge(t)?{}:t[n],r[n]):r[n]=!qe(e[n],t[n]);return r}var kt=(e,t)=>hn(e,t,Jt(t));const us={value:!1,isValid:!1},ls={value:!0,isValid:!0};var mn=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!re(e[0].attributes.value)?re(e[0].value)||e[0].value===""?ls:{value:e[0].value,isValid:!0}:ls:us}return us},pn=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>re(e)?e:t?e===""?NaN:e&&+e:r&&Re(e)?new Date(e):s?s(e):e;const ds={isValid:!1,value:null};var gn=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,ds):ds;function fs(e){const t=e.ref;return Or(t)?t.files:Rr(t)?gn(e.refs).value:dn(t)?[...t.selectedOptions].map(({value:r})=>r):Zt(t)?mn(e.refs).value:pn(re(t.value)?e.ref.value:t.value,e)}var Zi=(e,t,r,s)=>{const n={};for(const i of e){const o=N(t,i);o&&M(n,i,o._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:s}},Xt=e=>e instanceof RegExp,St=e=>re(e)?e:Xt(e)?e.source:X(e)?Xt(e.value)?e.value.source:e.value:e,hs=e=>({isOnSubmit:!e||e===Ee.onSubmit,isOnBlur:e===Ee.onBlur,isOnChange:e===Ee.onChange,isOnAll:e===Ee.all,isOnTouch:e===Ee.onTouched});const ms="AsyncFunction";var Ti=e=>!!e&&!!e.validate&&!!(Ne(e.validate)&&e.validate.constructor.name===ms||X(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===ms)),Ii=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),ps=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const zt=(e,t,r,s)=>{for(const n of r||Object.keys(e)){const i=N(e,n);if(i){const{_f:o,...c}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],n)&&!s)return!0;if(o.ref&&t(o.ref,o.name)&&!s)return!0;if(zt(c,t))break}else if(X(c)&&zt(c,t))break}}};function gs(e,t,r){const s=N(e,r);if(s||sr(r))return{error:s,name:r};const n=r.split(".");for(;n.length;){const i=n.join("."),o=N(t,i),c=N(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(c&&c.type)return{name:i,error:c};if(c&&c.root&&c.root.type)return{name:`${i}.root`,error:c.root};n.pop()}return{name:r}}var Vi=(e,t,r,s)=>{r(e);const{name:n,...i}=e;return be(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!s||Ee.all))},Ui=(e,t,r)=>!e||!t||e===t||Nt(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),Li=(e,t,r,s,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?s.isOnBlur:n.isOnBlur)?!e:(r?s.isOnChange:n.isOnChange)?e:!0,Mi=(e,t)=>!Cr(N(e,t)).length&&te(e,t),qi=(e,t,r)=>{const s=Nt(N(e,r));return M(s,"root",t[r]),M(e,r,s),e},Bt=e=>Re(e);function ys(e,t,r="validate"){if(Bt(e)||Array.isArray(e)&&e.every(Bt)||Ce(e)&&!e)return{type:r,message:Bt(e)?e:"",ref:t}}var ft=e=>X(e)&&!Xt(e)?e:{value:e,message:""},vs=async(e,t,r,s,n,i)=>{const{ref:o,refs:c,required:h,maxLength:p,minLength:b,min:y,max:l,pattern:j,validate:E,name:x,valueAsNumber:z,mount:S}=e._f,w=N(r,x);if(!S||t.has(x))return{};const $=c?c[0]:o,A=Z=>{n&&$.reportValidity&&($.setCustomValidity(Ce(Z)?"":Z||""),$.reportValidity())},D={},ee=Rr(o),oe=Zt(o),ve=ee||oe,I=(z||Or(o))&&re(o.value)&&re(w)||Yt(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,le=Fr.bind(null,x,s,D),de=(Z,U,Q,ae=Te.maxLength,fe=Te.minLength)=>{const xe=Z?U:Q;D[x]={type:Z?ae:fe,message:xe,ref:o,...le(Z?ae:fe,xe)}};if(i?!Array.isArray(w)||!w.length:h&&(!ve&&(I||ge(w))||Ce(w)&&!w||oe&&!mn(c).isValid||ee&&!gn(c).isValid)){const{value:Z,message:U}=Bt(h)?{value:!!h,message:h}:ft(h);if(Z&&(D[x]={type:Te.required,message:U,ref:$,...le(Te.required,U)},!s))return A(U),D}if(!I&&(!ge(y)||!ge(l))){let Z,U;const Q=ft(l),ae=ft(y);if(!ge(w)&&!isNaN(w)){const fe=o.valueAsNumber||w&&+w;ge(Q.value)||(Z=fe>Q.value),ge(ae.value)||(U=fe<ae.value)}else{const fe=o.valueAsDate||new Date(w),xe=v=>new Date(new Date().toDateString()+" "+v),Ue=o.type=="time",Ze=o.type=="week";Re(Q.value)&&w&&(Z=Ue?xe(w)>xe(Q.value):Ze?w>Q.value:fe>new Date(Q.value)),Re(ae.value)&&w&&(U=Ue?xe(w)<xe(ae.value):Ze?w<ae.value:fe<new Date(ae.value))}if((Z||U)&&(de(!!Z,Q.message,ae.message,Te.max,Te.min),!s))return A(D[x].message),D}if((p||b)&&!I&&(Re(w)||i&&Array.isArray(w))){const Z=ft(p),U=ft(b),Q=!ge(Z.value)&&w.length>+Z.value,ae=!ge(U.value)&&w.length<+U.value;if((Q||ae)&&(de(Q,Z.message,U.message),!s))return A(D[x].message),D}if(j&&!I&&Re(w)){const{value:Z,message:U}=ft(j);if(Xt(Z)&&!w.match(Z)&&(D[x]={type:Te.pattern,message:U,ref:o,...le(Te.pattern,U)},!s))return A(U),D}if(E){if(Ne(E)){const Z=await E(w,r),U=ys(Z,$);if(U&&(D[x]={...U,...le(Te.validate,U.message)},!s))return A(U.message),D}else if(X(E)){let Z={};for(const U in E){if(!be(Z)&&!s)break;const Q=ys(await E[U](w,r),$,U);Q&&(Z={...Q,...le(U,Q.message)},A(Q.message),s&&(D[x]=Z))}if(!be(Z)&&(D[x]={ref:$,...Z},!s))return D}}return A(!0),D};const Qi={mode:Ee.onSubmit,reValidateMode:Ee.onChange,shouldFocusError:!0};function Bi(e={}){let t={...Qi,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ne(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},n=X(t.defaultValues)||X(t.values)?ce(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:ce(n),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,p=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...b};const l={array:cs(),state:cs()},j=t.criteriaMode===Ee.all,E=u=>d=>{clearTimeout(p),p=setTimeout(u,d)},x=async u=>{if(!t.disabled&&(b.isValid||y.isValid||u)){const d=t.resolver?be((await oe()).errors):await I(s,!0);d!==r.isValid&&l.state.next({isValid:d})}},z=(u,d)=>{!t.disabled&&(b.isValidating||b.validatingFields||y.isValidating||y.validatingFields)&&((u||Array.from(c.mount)).forEach(f=>{f&&(d?M(r.validatingFields,f,d):te(r.validatingFields,f))}),l.state.next({validatingFields:r.validatingFields,isValidating:!be(r.validatingFields)}))},S=(u,d=[],f,P,k=!0,_=!0)=>{if(P&&f&&!t.disabled){if(o.action=!0,_&&Array.isArray(N(s,u))){const C=f(N(s,u),P.argA,P.argB);k&&M(s,u,C)}if(_&&Array.isArray(N(r.errors,u))){const C=f(N(r.errors,u),P.argA,P.argB);k&&M(r.errors,u,C),Mi(r.errors,u)}if((b.touchedFields||y.touchedFields)&&_&&Array.isArray(N(r.touchedFields,u))){const C=f(N(r.touchedFields,u),P.argA,P.argB);k&&M(r.touchedFields,u,C)}(b.dirtyFields||y.dirtyFields)&&(r.dirtyFields=kt(n,i)),l.state.next({name:u,isDirty:de(u,d),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else M(i,u,d)},w=(u,d)=>{M(r.errors,u,d),l.state.next({errors:r.errors})},$=u=>{r.errors=u,l.state.next({errors:r.errors,isValid:!1})},A=(u,d,f,P)=>{const k=N(s,u);if(k){const _=N(i,u,re(f)?N(n,u):f);re(_)||P&&P.defaultChecked||d?M(i,u,d?_:fs(k._f)):Q(u,_),o.mount&&x()}},D=(u,d,f,P,k)=>{let _=!1,C=!1;const L={name:u};if(!t.disabled){if(!f||P){(b.isDirty||y.isDirty)&&(C=r.isDirty,r.isDirty=L.isDirty=de(),_=C!==L.isDirty);const q=qe(N(n,u),d);C=!!N(r.dirtyFields,u),q?te(r.dirtyFields,u):M(r.dirtyFields,u,!0),L.dirtyFields=r.dirtyFields,_=_||(b.dirtyFields||y.dirtyFields)&&C!==!q}if(f){const q=N(r.touchedFields,u);q||(M(r.touchedFields,u,f),L.touchedFields=r.touchedFields,_=_||(b.touchedFields||y.touchedFields)&&q!==f)}_&&k&&l.state.next(L)}return _?L:{}},ee=(u,d,f,P)=>{const k=N(r.errors,u),_=(b.isValid||y.isValid)&&Ce(d)&&r.isValid!==d;if(t.delayError&&f?(h=E(()=>w(u,f)),h(t.delayError)):(clearTimeout(p),h=null,f?M(r.errors,u,f):te(r.errors,u)),(f?!qe(k,f):k)||!be(P)||_){const C={...P,..._&&Ce(d)?{isValid:d}:{},errors:r.errors,name:u};r={...r,...C},l.state.next(C)}},oe=async u=>{z(u,!0);const d=await t.resolver(i,t.context,Zi(u||c.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return z(u),d},ve=async u=>{const{errors:d}=await oe(u);if(u)for(const f of u){const P=N(d,f);P?M(r.errors,f,P):te(r.errors,f)}else r.errors=d;return d},I=async(u,d,f={valid:!0})=>{for(const P in u){const k=u[P];if(k){const{_f:_,...C}=k;if(_){const L=c.array.has(_.name),q=k._f&&Ti(k._f);q&&b.validatingFields&&z([P],!0);const _e=await vs(k,c.disabled,i,j,t.shouldUseNativeValidation&&!d,L);if(q&&b.validatingFields&&z([P]),_e[_.name]&&(f.valid=!1,d))break;!d&&(N(_e,_.name)?L?qi(r.errors,_e,_.name):M(r.errors,_.name,_e[_.name]):te(r.errors,_.name))}!be(C)&&await I(C,d,f)}}return f.valid},le=()=>{for(const u of c.unMount){const d=N(s,u);d&&(d._f.refs?d._f.refs.every(f=>!hr(f)):!hr(d._f.ref))&&Je(u)}c.unMount=new Set},de=(u,d)=>!t.disabled&&(u&&d&&M(i,u,d),!qe(v(),n)),Z=(u,d,f)=>Fi(u,c,{...o.mount?i:re(d)?n:Re(u)?{[u]:d}:d},f,d),U=u=>Cr(N(o.mount?i:n,u,t.shouldUnregister?N(n,u,[]):[])),Q=(u,d,f={})=>{const P=N(s,u);let k=d;if(P){const _=P._f;_&&(!_.disabled&&M(i,u,pn(d,_)),k=Yt(_.ref)&&ge(d)?"":d,dn(_.ref)?[..._.ref.options].forEach(C=>C.selected=k.includes(C.value)):_.refs?Zt(_.ref)?_.refs.forEach(C=>{(!C.defaultChecked||!C.disabled)&&(Array.isArray(k)?C.checked=!!k.find(L=>L===C.value):C.checked=k===C.value||!!k)}):_.refs.forEach(C=>C.checked=C.value===k):Or(_.ref)?_.ref.value="":(_.ref.value=k,_.ref.type||l.state.next({name:u,values:ce(i)})))}(f.shouldDirty||f.shouldTouch)&&D(u,k,f.shouldTouch,f.shouldDirty,!0),f.shouldValidate&&Ze(u)},ae=(u,d,f)=>{for(const P in d){if(!d.hasOwnProperty(P))return;const k=d[P],_=u+"."+P,C=N(s,_);(c.array.has(u)||X(k)||C&&!C._f)&&!et(k)?ae(_,k,f):Q(_,k,f)}},fe=(u,d,f={})=>{const P=N(s,u),k=c.array.has(u),_=ce(d);M(i,u,_),k?(l.array.next({name:u,values:ce(i)}),(b.isDirty||b.dirtyFields||y.isDirty||y.dirtyFields)&&f.shouldDirty&&l.state.next({name:u,dirtyFields:kt(n,i),isDirty:de(u,_)})):P&&!P._f&&!ge(_)?ae(u,_,f):Q(u,_,f),ps(u,c)&&l.state.next({...r}),l.state.next({name:o.mount?u:void 0,values:ce(i)})},xe=async u=>{o.mount=!0;const d=u.target;let f=d.name,P=!0;const k=N(s,f),_=q=>{P=Number.isNaN(q)||et(q)&&isNaN(q.getTime())||qe(q,N(i,f,q))},C=hs(t.mode),L=hs(t.reValidateMode);if(k){let q,_e;const It=d.type?fs(k._f):Pi(u),Le=u.type===as.BLUR||u.type===as.FOCUS_OUT,Zn=!Ii(k._f)&&!t.resolver&&!N(r.errors,f)&&!k._f.deps||Li(Le,N(r.touchedFields,f),r.isSubmitted,L,C),ur=ps(f,c,Le);M(i,f,It),Le?(k._f.onBlur&&k._f.onBlur(u),h&&h(0)):k._f.onChange&&k._f.onChange(u);const lr=D(f,It,Le),Tn=!be(lr)||ur;if(!Le&&l.state.next({name:f,type:u.type,values:ce(i)}),Zn)return(b.isValid||y.isValid)&&(t.mode==="onBlur"?Le&&x():Le||x()),Tn&&l.state.next({name:f,...ur?{}:lr});if(!Le&&ur&&l.state.next({...r}),t.resolver){const{errors:Wr}=await oe([f]);if(_(It),P){const In=gs(r.errors,s,f),Kr=gs(Wr,s,In.name||f);q=Kr.error,f=Kr.name,_e=be(Wr)}}else z([f],!0),q=(await vs(k,c.disabled,i,j,t.shouldUseNativeValidation))[f],z([f]),_(It),P&&(q?_e=!1:(b.isValid||y.isValid)&&(_e=await I(s,!0)));P&&(k._f.deps&&Ze(k._f.deps),ee(f,_e,q,lr))}},Ue=(u,d)=>{if(N(r.errors,d)&&u.focus)return u.focus(),1},Ze=async(u,d={})=>{let f,P;const k=Nt(u);if(t.resolver){const _=await ve(re(u)?u:k);f=be(_),P=u?!k.some(C=>N(_,C)):f}else u?(P=(await Promise.all(k.map(async _=>{const C=N(s,_);return await I(C&&C._f?{[_]:C}:C)}))).every(Boolean),!(!P&&!r.isValid)&&x()):P=f=await I(s);return l.state.next({...!Re(u)||(b.isValid||y.isValid)&&f!==r.isValid?{}:{name:u},...t.resolver||!u?{isValid:f}:{},errors:r.errors}),d.shouldFocus&&!P&&zt(s,Ue,u?k:c.mount),P},v=u=>{const d={...o.mount?i:n};return re(u)?d:Re(u)?N(d,u):u.map(f=>N(d,f))},R=(u,d)=>({invalid:!!N((d||r).errors,u),isDirty:!!N((d||r).dirtyFields,u),error:N((d||r).errors,u),isValidating:!!N(r.validatingFields,u),isTouched:!!N((d||r).touchedFields,u)}),B=u=>{u&&Nt(u).forEach(d=>te(r.errors,d)),l.state.next({errors:u?r.errors:{}})},ne=(u,d,f)=>{const P=(N(s,u,{_f:{}})._f||{}).ref,k=N(r.errors,u)||{},{ref:_,message:C,type:L,...q}=k;M(r.errors,u,{...q,...d,ref:P}),l.state.next({name:u,errors:r.errors,isValid:!1}),f&&f.shouldFocus&&P&&P.focus&&P.focus()},ze=(u,d)=>Ne(u)?l.state.subscribe({next:f=>u(Z(void 0,d),f)}):Z(u,d,!0),we=u=>l.state.subscribe({next:d=>{Ui(u.name,d.name,u.exact)&&Vi(d,u.formState||b,Dn,u.reRenderRoot)&&u.callback({values:{...i},...r,...d})}}).unsubscribe,wt=u=>(o.mount=!0,y={...y,...u.formState},we({...u,formState:y})),Je=(u,d={})=>{for(const f of u?Nt(u):c.mount)c.mount.delete(f),c.array.delete(f),d.keepValue||(te(s,f),te(i,f)),!d.keepError&&te(r.errors,f),!d.keepDirty&&te(r.dirtyFields,f),!d.keepTouched&&te(r.touchedFields,f),!d.keepIsValidating&&te(r.validatingFields,f),!t.shouldUnregister&&!d.keepDefaultValue&&te(n,f);l.state.next({values:ce(i)}),l.state.next({...r,...d.keepDirty?{isDirty:de()}:{}}),!d.keepIsValid&&x()},ie=({disabled:u,name:d})=>{(Ce(u)&&o.mount||u||c.disabled.has(d))&&(u?c.disabled.add(d):c.disabled.delete(d))},$e=(u,d={})=>{let f=N(s,u);const P=Ce(d.disabled)||Ce(t.disabled);return M(s,u,{...f||{},_f:{...f&&f._f?f._f:{ref:{name:u}},name:u,mount:!0,...d}}),c.mount.add(u),f?ie({disabled:Ce(d.disabled)?d.disabled:t.disabled,name:u}):A(u,!0,d.value),{...P?{disabled:d.disabled||t.disabled}:{},...t.progressive?{required:!!d.required,min:St(d.min),max:St(d.max),minLength:St(d.minLength),maxLength:St(d.maxLength),pattern:St(d.pattern)}:{},name:u,onChange:xe,onBlur:xe,ref:k=>{if(k){$e(u,d),f=N(s,u);const _=re(k.value)&&k.querySelectorAll&&k.querySelectorAll("input,select,textarea")[0]||k,C=Oi(_),L=f._f.refs||[];if(C?L.find(q=>q===_):_===f._f.ref)return;M(s,u,{_f:{...f._f,...C?{refs:[...L.filter(hr),_,...Array.isArray(N(n,u))?[{}]:[]],ref:{type:_.type,name:u}}:{ref:_}}}),A(u,!1,void 0,_)}else f=N(s,u,{}),f._f&&(f._f.mount=!1),(t.shouldUnregister||d.shouldUnregister)&&!(Ni(c.array,u)&&o.action)&&c.unMount.add(u)}}},Xe=()=>t.shouldFocusError&&zt(s,Ue,c.mount),cr=u=>{Ce(u)&&(l.state.next({disabled:u}),zt(s,(d,f)=>{const P=N(s,f);P&&(d.disabled=P._f.disabled||u,Array.isArray(P._f.refs)&&P._f.refs.forEach(k=>{k.disabled=P._f.disabled||u}))},0,!1))},Mr=(u,d)=>async f=>{let P;f&&(f.preventDefault&&f.preventDefault(),f.persist&&f.persist());let k=ce(i);if(l.state.next({isSubmitting:!0}),t.resolver){const{errors:_,values:C}=await oe();r.errors=_,k=ce(C)}else await I(s);if(c.disabled.size)for(const _ of c.disabled)te(k,_);if(te(r.errors,"root"),be(r.errors)){l.state.next({errors:{}});try{await u(k,f)}catch(_){P=_}}else d&&await d({...r.errors},f),Xe(),setTimeout(Xe);if(l.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:be(r.errors)&&!P,submitCount:r.submitCount+1,errors:r.errors}),P)throw P},On=(u,d={})=>{N(s,u)&&(re(d.defaultValue)?fe(u,ce(N(n,u))):(fe(u,d.defaultValue),M(n,u,ce(d.defaultValue))),d.keepTouched||te(r.touchedFields,u),d.keepDirty||(te(r.dirtyFields,u),r.isDirty=d.defaultValue?de(u,ce(N(n,u))):de()),d.keepError||(te(r.errors,u),b.isValid&&x()),l.state.next({...r}))},qr=(u,d={})=>{const f=u?ce(u):n,P=ce(f),k=be(u),_=k?n:P;if(d.keepDefaultValues||(n=f),!d.keepValues){if(d.keepDirtyValues){const C=new Set([...c.mount,...Object.keys(kt(n,i))]);for(const L of Array.from(C))N(r.dirtyFields,L)?M(_,L,N(i,L)):fe(L,N(_,L))}else{if($r&&re(u))for(const C of c.mount){const L=N(s,C);if(L&&L._f){const q=Array.isArray(L._f.refs)?L._f.refs[0]:L._f.ref;if(Yt(q)){const _e=q.closest("form");if(_e){_e.reset();break}}}}if(d.keepFieldsRef)for(const C of c.mount)fe(C,N(_,C));else s={}}i=t.shouldUnregister?d.keepDefaultValues?ce(n):{}:ce(_),l.array.next({values:{..._}}),l.state.next({values:{..._}})}c={mount:d.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!b.isValid||!!d.keepIsValid||!!d.keepDirtyValues,o.watch=!!t.shouldUnregister,l.state.next({submitCount:d.keepSubmitCount?r.submitCount:0,isDirty:k?!1:d.keepDirty?r.isDirty:!!(d.keepDefaultValues&&!qe(u,n)),isSubmitted:d.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:k?{}:d.keepDirtyValues?d.keepDefaultValues&&i?kt(n,i):r.dirtyFields:d.keepDefaultValues&&u?kt(n,u):d.keepDirty?r.dirtyFields:{},touchedFields:d.keepTouched?r.touchedFields:{},errors:d.keepErrors?r.errors:{},isSubmitSuccessful:d.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Qr=(u,d)=>qr(Ne(u)?u(i):u,d),Rn=(u,d={})=>{const f=N(s,u),P=f&&f._f;if(P){const k=P.refs?P.refs[0]:P.ref;k.focus&&(k.focus(),d.shouldSelect&&Ne(k.select)&&k.select())}},Dn=u=>{r={...r,...u}},Br={control:{register:$e,unregister:Je,getFieldState:R,handleSubmit:Mr,setError:ne,_subscribe:we,_runSchema:oe,_focusError:Xe,_getWatch:Z,_getDirty:de,_setValid:x,_setFieldArray:S,_setDisabledField:ie,_setErrors:$,_getFieldArray:U,_reset:qr,_resetDefaultValues:()=>Ne(t.defaultValues)&&t.defaultValues().then(u=>{Qr(u,t.resetOptions),l.state.next({isLoading:!1})}),_removeUnmounted:le,_disableForm:cr,_subjects:l,_proxyFormState:b,get _fields(){return s},get _formValues(){return i},get _state(){return o},set _state(u){o=u},get _defaultValues(){return n},get _names(){return c},set _names(u){c=u},get _formState(){return r},get _options(){return t},set _options(u){t={...t,...u}}},subscribe:wt,trigger:Ze,register:$e,handleSubmit:Mr,watch:ze,setValue:fe,getValues:v,reset:Qr,resetField:On,clearErrors:B,unregister:Je,setError:ne,setFocus:Rn,getFieldState:R};return{...Br,formControl:Br}}function Wi(e={}){const t=T.useRef(void 0),r=T.useRef(void 0),[s,n]=T.useState({isDirty:!1,isValidating:!1,isLoading:Ne(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ne(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Ne(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...c}=Bi(e);t.current={...c,formState:s}}const i=t.current.control;return i._options=e,Ai(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(c=>({...c,isReady:!0})),i._formState.isReady=!0,o},[i]),T.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),T.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),T.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),T.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),T.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==s.isDirty&&i._subjects.state.next({isDirty:o})}},[i,s.isDirty]),T.useEffect(()=>{e.values&&!qe(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,n(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),T.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Ci(s,i),t.current}const bs=(e,t,r)=>{if(e&&"reportValidity"in e){const s=N(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},wr=(e,t)=>{for(const r in t.fields){const s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?bs(s.ref,r,e):s&&s.refs&&s.refs.forEach(n=>bs(n,r,e))}},xs=(e,t)=>{t.shouldUseNativeValidation&&wr(e,t);const r={};for(const s in e){const n=N(t.fields,s),i=Object.assign(e[s]||{},{ref:n&&n.ref});if(Ki(t.names||Object.keys(e),s)){const o=Object.assign({},N(r,s));M(o,"root",i),M(r,s,o)}else M(r,s,i)}return r},Ki=(e,t)=>{const r=ws(t);return e.some(s=>ws(s).match(`^${r}\\.\\d+`))};function ws(e){return e.replace(/\]|\[/g,"")}function g(e,t,r){function s(c,h){var p;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(p=c._zod).traits??(p.traits=new Set),c._zod.traits.add(e),t(c,h);for(const b in o.prototype)b in c||Object.defineProperty(c,b,{value:o.prototype[b].bind(c)});c._zod.constr=o,c._zod.def=h}const n=(r==null?void 0:r.Parent)??Object;class i extends n{}Object.defineProperty(i,"name",{value:e});function o(c){var h;const p=r!=null&&r.Parent?new i:this;s(p,c),(h=p._zod).deferred??(h.deferred=[]);for(const b of p._zod.deferred)b();return p}return Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:c=>{var h,p;return r!=null&&r.Parent&&c instanceof r.Parent?!0:(p=(h=c==null?void 0:c._zod)==null?void 0:h.traits)==null?void 0:p.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class Ft extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const yn={};function ct(e){return yn}function Hi(e){const t=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,n])=>t.indexOf(+s)===-1).map(([s,n])=>n)}function Gi(e,t){return typeof t=="bigint"?t.toString():t}function vn(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Dr(e){return e==null}function Zr(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function W(e,t,r){Object.defineProperty(e,t,{get(){{const s=r();return e[t]=s,s}},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Tr(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Pt(e){return JSON.stringify(e)}const bn=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function _r(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Yi=vn(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function jr(e){if(_r(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(_r(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const Ji=new Set(["string","number","symbol"]);function nr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dt(e,t,r){const s=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(s._zod.parent=e),s}function F(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Xi(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function eo(e,t){const r={},s=e._zod.def;for(const n in t){if(!(n in s.shape))throw new Error(`Unrecognized key: "${n}"`);t[n]&&(r[n]=s.shape[n])}return dt(e,{...e._zod.def,shape:r,checks:[]})}function to(e,t){const r={...e._zod.def.shape},s=e._zod.def;for(const n in t){if(!(n in s.shape))throw new Error(`Unrecognized key: "${n}"`);t[n]&&delete r[n]}return dt(e,{...e._zod.def,shape:r,checks:[]})}function ro(e,t){if(!jr(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return Tr(this,"shape",s),s},checks:[]};return dt(e,r)}function so(e,t){return dt(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return Tr(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function no(e,t,r){const s=t._zod.def.shape,n={...s};if(r)for(const i in r){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(n[i]=e?new e({type:"optional",innerType:s[i]}):s[i])}else for(const i in s)n[i]=e?new e({type:"optional",innerType:s[i]}):s[i];return dt(t,{...t._zod.def,shape:n,checks:[]})}function io(e,t,r){const s=t._zod.def.shape,n={...s};if(r)for(const i in r){if(!(i in n))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(n[i]=new e({type:"nonoptional",innerType:s[i]}))}else for(const i in s)n[i]=new e({type:"nonoptional",innerType:s[i]});return dt(t,{...t._zod.def,shape:n,checks:[]})}function $t(e,t=0){var r;for(let s=t;s<e.issues.length;s++)if(((r=e.issues[s])==null?void 0:r.continue)!==!0)return!0;return!1}function Ir(e,t){return t.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(e),r})}function Lt(e){return typeof e=="string"?e:e==null?void 0:e.message}function ut(e,t,r){var n,i,o,c,h,p;const s={...e,path:e.path??[]};if(!e.message){const b=Lt((o=(i=(n=e.inst)==null?void 0:n._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,e))??Lt((c=t==null?void 0:t.error)==null?void 0:c.call(t,e))??Lt((h=r.customError)==null?void 0:h.call(r,e))??Lt((p=r.localeError)==null?void 0:p.call(r,e))??"Invalid input";s.message=b}return delete s.inst,delete s.continue,t!=null&&t.reportInput||delete s.input,s}function Vr(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Ot(...e){const[t,r,s]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:s}:{...t}}const xn=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,Gi,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Ur=g("$ZodError",xn),ir=g("$ZodError",xn,{Parent:Error});function oo(e,t=r=>r.message){const r={},s=[];for(const n of e.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(t(n))):s.push(t(n));return{formErrors:s,fieldErrors:r}}function ao(e,t){const r=t||function(i){return i.message},s={_errors:[]},n=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(c=>n({issues:c}));else if(o.code==="invalid_key")n({issues:o.issues});else if(o.code==="invalid_element")n({issues:o.issues});else if(o.path.length===0)s._errors.push(r(o));else{let c=s,h=0;for(;h<o.path.length;){const p=o.path[h];h===o.path.length-1?(c[p]=c[p]||{_errors:[]},c[p]._errors.push(r(o))):c[p]=c[p]||{_errors:[]},c=c[p],h++}}};return n(e),s}const wn=e=>(t,r,s,n)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new Ft;if(o.issues.length){const c=new((n==null?void 0:n.Err)??e)(o.issues.map(h=>ut(h,i,ct())));throw bn(c,n==null?void 0:n.callee),c}return o.value},co=wn(ir),_n=e=>async(t,r,s,n)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const c=new((n==null?void 0:n.Err)??e)(o.issues.map(h=>ut(h,i,ct())));throw bn(c,n==null?void 0:n.callee),c}return o.value},uo=_n(ir),jn=e=>(t,r,s)=>{const n=s?{...s,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},n);if(i instanceof Promise)throw new Ft;return i.issues.length?{success:!1,error:new(e??Ur)(i.issues.map(o=>ut(o,n,ct())))}:{success:!0,data:i.value}},lo=jn(ir),kn=e=>async(t,r,s)=>{const n=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},n);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>ut(o,n,ct())))}:{success:!0,data:i.value}},fo=kn(ir),ho=/^[cC][^\s-]{8,}$/,mo=/^[0-9a-z]+$/,po=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,go=/^[0-9a-vA-V]{20}$/,yo=/^[A-Za-z0-9]{27}$/,vo=/^[a-zA-Z0-9_-]{21}$/,bo=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,xo=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,_s=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,wo=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_o="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function jo(){return new RegExp(_o,"u")}const ko=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,So=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Po=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Eo=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,No=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Sn=/^[A-Za-z0-9_-]*$/,zo=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,$o=/^\+(?:[0-9]){6,14}[0-9]$/,Pn="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Co=new RegExp(`^${Pn}$`);function En(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Ao(e){return new RegExp(`^${En(e)}$`)}function Fo(e){const t=En({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const s=`${t}(?:${r.join("|")})`;return new RegExp(`^${Pn}T(?:${s})$`)}const Oo=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Ro=/^[^A-Z]*$/,Do=/^[^a-z]*$/,De=g("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Zo=g("$ZodCheckMaxLength",(e,t)=>{var r;De.init(e,t),(r=e._zod.def).when??(r.when=s=>{const n=s.value;return!Dr(n)&&n.length!==void 0}),e._zod.onattach.push(s=>{const n=s._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(s._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const n=s.value;if(n.length<=t.maximum)return;const o=Vr(n);s.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),To=g("$ZodCheckMinLength",(e,t)=>{var r;De.init(e,t),(r=e._zod.def).when??(r.when=s=>{const n=s.value;return!Dr(n)&&n.length!==void 0}),e._zod.onattach.push(s=>{const n=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(s._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const n=s.value;if(n.length>=t.minimum)return;const o=Vr(n);s.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),Io=g("$ZodCheckLengthEquals",(e,t)=>{var r;De.init(e,t),(r=e._zod.def).when??(r.when=s=>{const n=s.value;return!Dr(n)&&n.length!==void 0}),e._zod.onattach.push(s=>{const n=s._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=s=>{const n=s.value,i=n.length;if(i===t.length)return;const o=Vr(n),c=i>t.length;s.issues.push({origin:o,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),or=g("$ZodCheckStringFormat",(e,t)=>{var r,s;De.init(e,t),e._zod.onattach.push(n=>{const i=n._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),Vo=g("$ZodCheckRegex",(e,t)=>{or.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Uo=g("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Ro),or.init(e,t)}),Lo=g("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Do),or.init(e,t)}),Mo=g("$ZodCheckIncludes",(e,t)=>{De.init(e,t);const r=nr(t.includes),s=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=s,e._zod.onattach.push(n=>{const i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),qo=g("$ZodCheckStartsWith",(e,t)=>{De.init(e,t);const r=new RegExp(`^${nr(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const n=s._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),Qo=g("$ZodCheckEndsWith",(e,t)=>{De.init(e,t);const r=new RegExp(`.*${nr(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(s=>{const n=s._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),Bo=g("$ZodCheckOverwrite",(e,t)=>{De.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Wo{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const s=t.split(`
`).filter(o=>o),n=Math.min(...s.map(o=>o.length-o.trimStart().length)),i=s.map(o=>o.slice(n)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,r=this==null?void 0:this.args,n=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new t(...r,n.join(`
`))}}const Ko={major:4,minor:0,patch:5},se=g("$ZodType",(e,t)=>{var n;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Ko;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const i of s)for(const o of i._zod.onattach)o(e);if(s.length===0)(r=e._zod).deferred??(r.deferred=[]),(n=e._zod.deferred)==null||n.push(()=>{e._zod.run=e._zod.parse});else{const i=(o,c,h)=>{let p=$t(o),b;for(const y of c){if(y._zod.def.when){if(!y._zod.def.when(o))continue}else if(p)continue;const l=o.issues.length,j=y._zod.check(o);if(j instanceof Promise&&(h==null?void 0:h.async)===!1)throw new Ft;if(b||j instanceof Promise)b=(b??Promise.resolve()).then(async()=>{await j,o.issues.length!==l&&(p||(p=$t(o,l)))});else{if(o.issues.length===l)continue;p||(p=$t(o,l))}}return b?b.then(()=>o):o};e._zod.run=(o,c)=>{const h=e._zod.parse(o,c);if(h instanceof Promise){if(c.async===!1)throw new Ft;return h.then(p=>i(p,s,c))}return i(h,s,c)}}e["~standard"]={validate:i=>{var o;try{const c=lo(e,i);return c.success?{value:c.data}:{issues:(o=c.error)==null?void 0:o.issues}}catch{return fo(e,i).then(h=>{var p;return h.success?{value:h.data}:{issues:(p=h.error)==null?void 0:p.issues}})}},vendor:"zod",version:1}}),Lr=g("$ZodString",(e,t)=>{var r;se.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??Oo(e._zod.bag),e._zod.parse=(s,n)=>{if(t.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),K=g("$ZodStringFormat",(e,t)=>{or.init(e,t),Lr.init(e,t)}),Ho=g("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=xo),K.init(e,t)}),Go=g("$ZodUUID",(e,t)=>{if(t.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(s===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=_s(s))}else t.pattern??(t.pattern=_s());K.init(e,t)}),Yo=g("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=wo),K.init(e,t)}),Jo=g("$ZodURL",(e,t)=>{K.init(e,t),e._zod.check=r=>{try{const s=r.value,n=new URL(s),i=n.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:zo.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!s.endsWith("/")&&i.endsWith("/")?r.value=i.slice(0,-1):r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Xo=g("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=jo()),K.init(e,t)}),ea=g("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=vo),K.init(e,t)}),ta=g("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=ho),K.init(e,t)}),ra=g("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=mo),K.init(e,t)}),sa=g("$ZodULID",(e,t)=>{t.pattern??(t.pattern=po),K.init(e,t)}),na=g("$ZodXID",(e,t)=>{t.pattern??(t.pattern=go),K.init(e,t)}),ia=g("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=yo),K.init(e,t)}),oa=g("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Fo(t)),K.init(e,t)}),aa=g("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Co),K.init(e,t)}),ca=g("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Ao(t)),K.init(e,t)}),ua=g("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=bo),K.init(e,t)}),la=g("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=ko),K.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv4"})}),da=g("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=So),K.init(e,t),e._zod.onattach.push(r=>{const s=r._zod.bag;s.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),fa=g("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Po),K.init(e,t)}),ha=g("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Eo),K.init(e,t),e._zod.check=r=>{const[s,n]=r.value.split("/");try{if(!n)throw new Error;const i=Number(n);if(`${i}`!==n)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Nn(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const ma=g("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=No),K.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Nn(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function pa(e){if(!Sn.test(e))return!1;const t=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Nn(r)}const ga=g("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Sn),K.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{pa(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),ya=g("$ZodE164",(e,t)=>{t.pattern??(t.pattern=$o),K.init(e,t)});function va(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const n=JSON.parse(atob(s));return!("typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||t&&(!("alg"in n)||n.alg!==t))}catch{return!1}}const ba=g("$ZodJWT",(e,t)=>{K.init(e,t),e._zod.check=r=>{va(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),xa=g("$ZodUnknown",(e,t)=>{se.init(e,t),e._zod.parse=r=>r}),wa=g("$ZodNever",(e,t)=>{se.init(e,t),e._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function js(e,t,r){e.issues.length&&t.issues.push(...Ir(r,e.issues)),t.value[r]=e.value}const _a=g("$ZodArray",(e,t)=>{se.init(e,t),e._zod.parse=(r,s)=>{const n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),r;r.value=Array(n.length);const i=[];for(let o=0;o<n.length;o++){const c=n[o],h=t.element._zod.run({value:c,issues:[]},s);h instanceof Promise?i.push(h.then(p=>js(p,r,o))):js(h,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function Mt(e,t,r){e.issues.length&&t.issues.push(...Ir(r,e.issues)),t.value[r]=e.value}function ks(e,t,r,s){e.issues.length?s[r]===void 0?r in s?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...Ir(r,e.issues)):e.value===void 0?r in s&&(t.value[r]=void 0):t.value[r]=e.value}const ja=g("$ZodObject",(e,t)=>{se.init(e,t);const r=vn(()=>{const y=Object.keys(t.shape);for(const j of y)if(!(t.shape[j]instanceof se))throw new Error(`Invalid element at key "${j}": expected a Zod schema`);const l=Xi(t.shape);return{shape:t.shape,keys:y,keySet:new Set(y),numKeys:y.length,optionalKeys:new Set(l)}});W(e._zod,"propValues",()=>{const y=t.shape,l={};for(const j in y){const E=y[j]._zod;if(E.values){l[j]??(l[j]=new Set);for(const x of E.values)l[j].add(x)}}return l});const s=y=>{const l=new Wo(["shape","payload","ctx"]),j=r.value,E=w=>{const $=Pt(w);return`shape[${$}]._zod.run({ value: input[${$}], issues: [] }, ctx)`};l.write("const input = payload.value;");const x=Object.create(null);let z=0;for(const w of j.keys)x[w]=`key_${z++}`;l.write("const newResult = {}");for(const w of j.keys)if(j.optionalKeys.has(w)){const $=x[w];l.write(`const ${$} = ${E(w)};`);const A=Pt(w);l.write(`
        if (${$}.issues.length) {
          if (input[${A}] === undefined) {
            if (${A} in input) {
              newResult[${A}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${$}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${A}, ...iss.path] : [${A}],
              }))
            );
          }
        } else if (${$}.value === undefined) {
          if (${A} in input) newResult[${A}] = undefined;
        } else {
          newResult[${A}] = ${$}.value;
        }
        `)}else{const $=x[w];l.write(`const ${$} = ${E(w)};`),l.write(`
          if (${$}.issues.length) payload.issues = payload.issues.concat(${$}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Pt(w)}, ...iss.path] : [${Pt(w)}]
          })));`),l.write(`newResult[${Pt(w)}] = ${$}.value`)}l.write("payload.value = newResult;"),l.write("return payload;");const S=l.compile();return(w,$)=>S(y,w,$)};let n;const i=_r,o=!yn.jitless,h=o&&Yi.value,p=t.catchall;let b;e._zod.parse=(y,l)=>{b??(b=r.value);const j=y.value;if(!i(j))return y.issues.push({expected:"object",code:"invalid_type",input:j,inst:e}),y;const E=[];if(o&&h&&(l==null?void 0:l.async)===!1&&l.jitless!==!0)n||(n=s(t.shape)),y=n(y,l);else{y.value={};const $=b.shape;for(const A of b.keys){const D=$[A],ee=D._zod.run({value:j[A],issues:[]},l),oe=D._zod.optin==="optional"&&D._zod.optout==="optional";ee instanceof Promise?E.push(ee.then(ve=>oe?ks(ve,y,A,j):Mt(ve,y,A))):oe?ks(ee,y,A,j):Mt(ee,y,A)}}if(!p)return E.length?Promise.all(E).then(()=>y):y;const x=[],z=b.keySet,S=p._zod,w=S.def.type;for(const $ of Object.keys(j)){if(z.has($))continue;if(w==="never"){x.push($);continue}const A=S.run({value:j[$],issues:[]},l);A instanceof Promise?E.push(A.then(D=>Mt(D,y,$))):Mt(A,y,$)}return x.length&&y.issues.push({code:"unrecognized_keys",keys:x,input:j,inst:e}),E.length?Promise.all(E).then(()=>y):y}});function Ss(e,t,r,s){for(const n of e)if(n.issues.length===0)return t.value=n.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(n=>n.issues.map(i=>ut(i,s,ct())))}),t}const ka=g("$ZodUnion",(e,t)=>{se.init(e,t),W(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),W(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),W(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),W(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${r.map(s=>Zr(s.source)).join("|")})$`)}}),e._zod.parse=(r,s)=>{let n=!1;const i=[];for(const o of t.options){const c=o._zod.run({value:r.value,issues:[]},s);if(c instanceof Promise)i.push(c),n=!0;else{if(c.issues.length===0)return c;i.push(c)}}return n?Promise.all(i).then(o=>Ss(o,r,e,s)):Ss(i,r,e,s)}}),Sa=g("$ZodIntersection",(e,t)=>{se.init(e,t),e._zod.parse=(r,s)=>{const n=r.value,i=t.left._zod.run({value:n,issues:[]},s),o=t.right._zod.run({value:n,issues:[]},s);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([h,p])=>Ps(r,h,p)):Ps(r,i,o)}});function kr(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(jr(e)&&jr(t)){const r=Object.keys(t),s=Object.keys(e).filter(i=>r.indexOf(i)!==-1),n={...e,...t};for(const i of s){const o=kr(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};n[i]=o.data}return{valid:!0,data:n}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<e.length;s++){const n=e[s],i=t[s],o=kr(n,i);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Ps(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),$t(e))return e;const s=kr(t.value,r.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const Pa=g("$ZodEnum",(e,t)=>{se.init(e,t);const r=Hi(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(s=>Ji.has(typeof s)).map(s=>typeof s=="string"?nr(s):s.toString()).join("|")})$`),e._zod.parse=(s,n)=>{const i=s.value;return e._zod.values.has(i)||s.issues.push({code:"invalid_value",values:r,input:i,inst:e}),s}}),Ea=g("$ZodTransform",(e,t)=>{se.init(e,t),e._zod.parse=(r,s)=>{const n=t.transform(r.value,r);if(s.async)return(n instanceof Promise?n:Promise.resolve(n)).then(o=>(r.value=o,r));if(n instanceof Promise)throw new Ft;return r.value=n,r}}),Na=g("$ZodOptional",(e,t)=>{se.init(e,t),e._zod.optin="optional",e._zod.optout="optional",W(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),W(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Zr(r.source)})?$`):void 0}),e._zod.parse=(r,s)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,s):r.value===void 0?r:t.innerType._zod.run(r,s)}),za=g("$ZodNullable",(e,t)=>{se.init(e,t),W(e._zod,"optin",()=>t.innerType._zod.optin),W(e._zod,"optout",()=>t.innerType._zod.optout),W(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Zr(r.source)}|null)$`):void 0}),W(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,s)=>r.value===null?r:t.innerType._zod.run(r,s)}),$a=g("$ZodDefault",(e,t)=>{se.init(e,t),e._zod.optin="optional",W(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const n=t.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>Es(i,t)):Es(n,t)}});function Es(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Ca=g("$ZodPrefault",(e,t)=>{se.init(e,t),e._zod.optin="optional",W(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,s))}),Aa=g("$ZodNonOptional",(e,t)=>{se.init(e,t),W(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),e._zod.parse=(r,s)=>{const n=t.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>Ns(i,e)):Ns(n,e)}});function Ns(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Fa=g("$ZodCatch",(e,t)=>{se.init(e,t),e._zod.optin="optional",W(e._zod,"optout",()=>t.innerType._zod.optout),W(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,s)=>{const n=t.innerType._zod.run(r,s);return n instanceof Promise?n.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>ut(o,s,ct()))},input:r.value}),r.issues=[]),r)):(r.value=n.value,n.issues.length&&(r.value=t.catchValue({...r,error:{issues:n.issues.map(i=>ut(i,s,ct()))},input:r.value}),r.issues=[]),r)}}),Oa=g("$ZodPipe",(e,t)=>{se.init(e,t),W(e._zod,"values",()=>t.in._zod.values),W(e._zod,"optin",()=>t.in._zod.optin),W(e._zod,"optout",()=>t.out._zod.optout),W(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,s)=>{const n=t.in._zod.run(r,s);return n instanceof Promise?n.then(i=>zs(i,t,s)):zs(n,t,s)}});function zs(e,t,r){return $t(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const Ra=g("$ZodReadonly",(e,t)=>{se.init(e,t),W(e._zod,"propValues",()=>t.innerType._zod.propValues),W(e._zod,"values",()=>t.innerType._zod.values),W(e._zod,"optin",()=>t.innerType._zod.optin),W(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,s)=>{const n=t.innerType._zod.run(r,s);return n instanceof Promise?n.then($s):$s(n)}});function $s(e){return e.value=Object.freeze(e.value),e}const Da=g("$ZodCustom",(e,t)=>{De.init(e,t),se.init(e,t),e._zod.parse=(r,s)=>r,e._zod.check=r=>{const s=r.value,n=t.fn(s);if(n instanceof Promise)return n.then(i=>Cs(i,r,s,e));Cs(n,r,s,e)}});function Cs(e,t,r,s){if(!e){const n={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(n.params=s._zod.def.params),t.issues.push(Ot(n))}}class Za{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const s=r[0];if(this._map.set(t,s),s&&typeof s=="object"&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const s={...this.get(r)??{}};return delete s.id,{...s,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function Ta(){return new Za}const qt=Ta();function Ia(e,t){return new e({type:"string",...F(t)})}function Va(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...F(t)})}function As(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...F(t)})}function Ua(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...F(t)})}function La(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...F(t)})}function Ma(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...F(t)})}function qa(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...F(t)})}function Qa(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...F(t)})}function Ba(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...F(t)})}function Wa(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...F(t)})}function Ka(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...F(t)})}function Ha(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...F(t)})}function Ga(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...F(t)})}function Ya(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...F(t)})}function Ja(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...F(t)})}function Xa(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...F(t)})}function ec(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...F(t)})}function tc(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...F(t)})}function rc(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...F(t)})}function sc(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...F(t)})}function nc(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...F(t)})}function ic(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...F(t)})}function oc(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...F(t)})}function ac(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...F(t)})}function cc(e,t){return new e({type:"string",format:"date",check:"string_format",...F(t)})}function uc(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...F(t)})}function lc(e,t){return new e({type:"string",format:"duration",check:"string_format",...F(t)})}function dc(e){return new e({type:"unknown"})}function fc(e,t){return new e({type:"never",...F(t)})}function zn(e,t){return new Zo({check:"max_length",...F(t),maximum:e})}function er(e,t){return new To({check:"min_length",...F(t),minimum:e})}function $n(e,t){return new Io({check:"length_equals",...F(t),length:e})}function hc(e,t){return new Vo({check:"string_format",format:"regex",...F(t),pattern:e})}function mc(e){return new Uo({check:"string_format",format:"lowercase",...F(e)})}function pc(e){return new Lo({check:"string_format",format:"uppercase",...F(e)})}function gc(e,t){return new Mo({check:"string_format",format:"includes",...F(t),includes:e})}function yc(e,t){return new qo({check:"string_format",format:"starts_with",...F(t),prefix:e})}function vc(e,t){return new Qo({check:"string_format",format:"ends_with",...F(t),suffix:e})}function Tt(e){return new Bo({check:"overwrite",tx:e})}function bc(e){return Tt(t=>t.normalize(e))}function xc(){return Tt(e=>e.trim())}function wc(){return Tt(e=>e.toLowerCase())}function _c(){return Tt(e=>e.toUpperCase())}function jc(e,t,r){return new e({type:"array",element:t,...F(r)})}function kc(e,t,r){return new e({type:"custom",check:"custom",fn:t,...F(r)})}function Fs(e,t){try{var r=e()}catch(s){return t(s)}return r&&r.then?r.then(void 0,t):r}function Sc(e,t){for(var r={};e.length;){var s=e[0],n=s.code,i=s.message,o=s.path.join(".");if(!r[o])if("unionErrors"in s){var c=s.unionErrors[0].errors[0];r[o]={message:c.message,type:c.code}}else r[o]={message:i,type:n};if("unionErrors"in s&&s.unionErrors.forEach(function(b){return b.errors.forEach(function(y){return e.push(y)})}),t){var h=r[o].types,p=h&&h[s.code];r[o]=Fr(o,t,r,n,p?[].concat(p,s.message):s.message)}e.shift()}return r}function Pc(e,t){for(var r={};e.length;){var s=e[0],n=s.code,i=s.message,o=s.path.join(".");if(!r[o])if(s.code==="invalid_union"){var c=s.errors[0][0];r[o]={message:c.message,type:c.code}}else r[o]={message:i,type:n};if(s.code==="invalid_union"&&s.errors.forEach(function(b){return b.forEach(function(y){return e.push(y)})}),t){var h=r[o].types,p=h&&h[s.code];r[o]=Fr(o,t,r,n,p?[].concat(p,s.message):s.message)}e.shift()}return r}function Ec(e,t,r){if(r===void 0&&(r={}),function(s){return"_def"in s&&typeof s._def=="object"&&"typeName"in s._def}(e))return function(s,n,i){try{return Promise.resolve(Fs(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(o){return i.shouldUseNativeValidation&&wr({},i),{errors:{},values:r.raw?Object.assign({},s):o}})},function(o){if(function(c){return Array.isArray(c==null?void 0:c.issues)}(o))return{values:{},errors:xs(Sc(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}};if(function(s){return"_zod"in s&&typeof s._zod=="object"}(e))return function(s,n,i){try{return Promise.resolve(Fs(function(){return Promise.resolve((r.mode==="sync"?co:uo)(e,s,t)).then(function(o){return i.shouldUseNativeValidation&&wr({},i),{errors:{},values:r.raw?Object.assign({},s):o}})},function(o){if(function(c){return c instanceof Ur}(o))return{values:{},errors:xs(Pc(o.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}};throw new Error("Invalid input: not a Zod schema")}const Nc=g("ZodISODateTime",(e,t)=>{oa.init(e,t),H.init(e,t)});function zc(e){return ac(Nc,e)}const $c=g("ZodISODate",(e,t)=>{aa.init(e,t),H.init(e,t)});function Cc(e){return cc($c,e)}const Ac=g("ZodISOTime",(e,t)=>{ca.init(e,t),H.init(e,t)});function Fc(e){return uc(Ac,e)}const Oc=g("ZodISODuration",(e,t)=>{ua.init(e,t),H.init(e,t)});function Rc(e){return lc(Oc,e)}const Dc=(e,t)=>{Ur.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>ao(e,r)},flatten:{value:r=>oo(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},ar=g("ZodError",Dc,{Parent:Error}),Zc=wn(ar),Tc=_n(ar),Ic=jn(ar),Vc=kn(ar),ue=g("ZodType",(e,t)=>(se.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),e.clone=(r,s)=>dt(e,r,s),e.brand=()=>e,e.register=(r,s)=>(r.add(e,s),e),e.parse=(r,s)=>Zc(e,r,s,{callee:e.parse}),e.safeParse=(r,s)=>Ic(e,r,s),e.parseAsync=async(r,s)=>Tc(e,r,s,{callee:e.parseAsync}),e.safeParseAsync=async(r,s)=>Vc(e,r,s),e.spa=e.safeParseAsync,e.refine=(r,s)=>e.check(Au(r,s)),e.superRefine=r=>e.check(Fu(r)),e.overwrite=r=>e.check(Tt(r)),e.optional=()=>Ds(e),e.nullable=()=>Zs(e),e.nullish=()=>Ds(Zs(e)),e.nonoptional=r=>ku(e,r),e.array=()=>uu(e),e.or=r=>hu([e,r]),e.and=r=>pu(e,r),e.transform=r=>Ts(e,vu(r)),e.default=r=>wu(e,r),e.prefault=r=>ju(e,r),e.catch=r=>Pu(e,r),e.pipe=r=>Ts(e,r),e.readonly=()=>zu(e),e.describe=r=>{const s=e.clone();return qt.add(s,{description:r}),s},Object.defineProperty(e,"description",{get(){var r;return(r=qt.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return qt.get(e);const s=e.clone();return qt.add(s,r[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Cn=g("_ZodString",(e,t)=>{Lr.init(e,t),ue.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...s)=>e.check(hc(...s)),e.includes=(...s)=>e.check(gc(...s)),e.startsWith=(...s)=>e.check(yc(...s)),e.endsWith=(...s)=>e.check(vc(...s)),e.min=(...s)=>e.check(er(...s)),e.max=(...s)=>e.check(zn(...s)),e.length=(...s)=>e.check($n(...s)),e.nonempty=(...s)=>e.check(er(1,...s)),e.lowercase=s=>e.check(mc(s)),e.uppercase=s=>e.check(pc(s)),e.trim=()=>e.check(xc()),e.normalize=(...s)=>e.check(bc(...s)),e.toLowerCase=()=>e.check(wc()),e.toUpperCase=()=>e.check(_c())}),Uc=g("ZodString",(e,t)=>{Lr.init(e,t),Cn.init(e,t),e.email=r=>e.check(Va(Lc,r)),e.url=r=>e.check(Qa(Mc,r)),e.jwt=r=>e.check(oc(nu,r)),e.emoji=r=>e.check(Ba(qc,r)),e.guid=r=>e.check(As(Os,r)),e.uuid=r=>e.check(Ua(Qt,r)),e.uuidv4=r=>e.check(La(Qt,r)),e.uuidv6=r=>e.check(Ma(Qt,r)),e.uuidv7=r=>e.check(qa(Qt,r)),e.nanoid=r=>e.check(Wa(Qc,r)),e.guid=r=>e.check(As(Os,r)),e.cuid=r=>e.check(Ka(Bc,r)),e.cuid2=r=>e.check(Ha(Wc,r)),e.ulid=r=>e.check(Ga(Kc,r)),e.base64=r=>e.check(sc(tu,r)),e.base64url=r=>e.check(nc(ru,r)),e.xid=r=>e.check(Ya(Hc,r)),e.ksuid=r=>e.check(Ja(Gc,r)),e.ipv4=r=>e.check(Xa(Yc,r)),e.ipv6=r=>e.check(ec(Jc,r)),e.cidrv4=r=>e.check(tc(Xc,r)),e.cidrv6=r=>e.check(rc(eu,r)),e.e164=r=>e.check(ic(su,r)),e.datetime=r=>e.check(zc(r)),e.date=r=>e.check(Cc(r)),e.time=r=>e.check(Fc(r)),e.duration=r=>e.check(Rc(r))});function mr(e){return Ia(Uc,e)}const H=g("ZodStringFormat",(e,t)=>{K.init(e,t),Cn.init(e,t)}),Lc=g("ZodEmail",(e,t)=>{Yo.init(e,t),H.init(e,t)}),Os=g("ZodGUID",(e,t)=>{Ho.init(e,t),H.init(e,t)}),Qt=g("ZodUUID",(e,t)=>{Go.init(e,t),H.init(e,t)}),Mc=g("ZodURL",(e,t)=>{Jo.init(e,t),H.init(e,t)}),qc=g("ZodEmoji",(e,t)=>{Xo.init(e,t),H.init(e,t)}),Qc=g("ZodNanoID",(e,t)=>{ea.init(e,t),H.init(e,t)}),Bc=g("ZodCUID",(e,t)=>{ta.init(e,t),H.init(e,t)}),Wc=g("ZodCUID2",(e,t)=>{ra.init(e,t),H.init(e,t)}),Kc=g("ZodULID",(e,t)=>{sa.init(e,t),H.init(e,t)}),Hc=g("ZodXID",(e,t)=>{na.init(e,t),H.init(e,t)}),Gc=g("ZodKSUID",(e,t)=>{ia.init(e,t),H.init(e,t)}),Yc=g("ZodIPv4",(e,t)=>{la.init(e,t),H.init(e,t)}),Jc=g("ZodIPv6",(e,t)=>{da.init(e,t),H.init(e,t)}),Xc=g("ZodCIDRv4",(e,t)=>{fa.init(e,t),H.init(e,t)}),eu=g("ZodCIDRv6",(e,t)=>{ha.init(e,t),H.init(e,t)}),tu=g("ZodBase64",(e,t)=>{ma.init(e,t),H.init(e,t)}),ru=g("ZodBase64URL",(e,t)=>{ga.init(e,t),H.init(e,t)}),su=g("ZodE164",(e,t)=>{ya.init(e,t),H.init(e,t)}),nu=g("ZodJWT",(e,t)=>{ba.init(e,t),H.init(e,t)}),iu=g("ZodUnknown",(e,t)=>{xa.init(e,t),ue.init(e,t)});function Rs(){return dc(iu)}const ou=g("ZodNever",(e,t)=>{wa.init(e,t),ue.init(e,t)});function au(e){return fc(ou,e)}const cu=g("ZodArray",(e,t)=>{_a.init(e,t),ue.init(e,t),e.element=t.element,e.min=(r,s)=>e.check(er(r,s)),e.nonempty=r=>e.check(er(1,r)),e.max=(r,s)=>e.check(zn(r,s)),e.length=(r,s)=>e.check($n(r,s)),e.unwrap=()=>e.element});function uu(e,t){return jc(cu,e,t)}const lu=g("ZodObject",(e,t)=>{ja.init(e,t),ue.init(e,t),W(e,"shape",()=>t.shape),e.keyof=()=>gu(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Rs()}),e.loose=()=>e.clone({...e._zod.def,catchall:Rs()}),e.strict=()=>e.clone({...e._zod.def,catchall:au()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>ro(e,r),e.merge=r=>so(e,r),e.pick=r=>eo(e,r),e.omit=r=>to(e,r),e.partial=(...r)=>no(An,e,r[0]),e.required=(...r)=>io(Fn,e,r[0])});function du(e,t){const r={type:"object",get shape(){return Tr(this,"shape",{...e}),this.shape},...F(t)};return new lu(r)}const fu=g("ZodUnion",(e,t)=>{ka.init(e,t),ue.init(e,t),e.options=t.options});function hu(e,t){return new fu({type:"union",options:e,...F(t)})}const mu=g("ZodIntersection",(e,t)=>{Sa.init(e,t),ue.init(e,t)});function pu(e,t){return new mu({type:"intersection",left:e,right:t})}const Sr=g("ZodEnum",(e,t)=>{Pa.init(e,t),ue.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(s,n)=>{const i={};for(const o of s)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Sr({...t,checks:[],...F(n),entries:i})},e.exclude=(s,n)=>{const i={...t.entries};for(const o of s)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Sr({...t,checks:[],...F(n),entries:i})}});function gu(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new Sr({type:"enum",entries:r,...F(t)})}const yu=g("ZodTransform",(e,t)=>{Ea.init(e,t),ue.init(e,t),e._zod.parse=(r,s)=>{r.addIssue=i=>{if(typeof i=="string")r.issues.push(Ot(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),o.continue??(o.continue=!0),r.issues.push(Ot(o))}};const n=t.transform(r.value,r);return n instanceof Promise?n.then(i=>(r.value=i,r)):(r.value=n,r)}});function vu(e){return new yu({type:"transform",transform:e})}const An=g("ZodOptional",(e,t)=>{Na.init(e,t),ue.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ds(e){return new An({type:"optional",innerType:e})}const bu=g("ZodNullable",(e,t)=>{za.init(e,t),ue.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Zs(e){return new bu({type:"nullable",innerType:e})}const xu=g("ZodDefault",(e,t)=>{$a.init(e,t),ue.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function wu(e,t){return new xu({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const _u=g("ZodPrefault",(e,t)=>{Ca.init(e,t),ue.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ju(e,t){return new _u({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Fn=g("ZodNonOptional",(e,t)=>{Aa.init(e,t),ue.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ku(e,t){return new Fn({type:"nonoptional",innerType:e,...F(t)})}const Su=g("ZodCatch",(e,t)=>{Fa.init(e,t),ue.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Pu(e,t){return new Su({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Eu=g("ZodPipe",(e,t)=>{Oa.init(e,t),ue.init(e,t),e.in=t.in,e.out=t.out});function Ts(e,t){return new Eu({type:"pipe",in:e,out:t})}const Nu=g("ZodReadonly",(e,t)=>{Ra.init(e,t),ue.init(e,t)});function zu(e){return new Nu({type:"readonly",innerType:e})}const $u=g("ZodCustom",(e,t)=>{Da.init(e,t),ue.init(e,t)});function Cu(e){const t=new De({check:"custom"});return t._zod.check=e,t}function Au(e,t={}){return kc($u,e,t)}function Fu(e){const t=Cu(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(Ot(s,r.value,t._zod.def));else{const n=s;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=t),n.continue??(n.continue=!t._zod.def.abort),r.issues.push(Ot(n))}},e(r.value,r)));return t}const Ou=du({currentPassword:mr().min(1,"Current password is required"),newPassword:mr().min(8,"Password must be at least 8 characters"),confirmPassword:mr().min(1,"Please confirm your password")}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),Ru=()=>{var x,z,S;const[e,t]=T.useState(!1),{mutate:r,isPending:s,error:n}=Ye.useUpdatePassword(),{register:i,handleSubmit:o,watch:c,reset:h,formState:{errors:p,isValid:b}}=Wi({resolver:Ec(Ou),mode:"onChange"}),y=c("newPassword",""),l=Et.PasswordService.calculateStrength(y),j=Et.PasswordService.isStrongPassword(y),E=w=>{if(!j)return;const $={currentPassword:w.currentPassword,newPassword:w.newPassword,confirmPassword:w.confirmPassword};r($,{onSuccess:()=>{t(!0),h(),setTimeout(()=>t(!1),5e3)}})};return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Profile"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Update your account settings"})]}),e&&a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center space-x-2",children:[a.jsx(Y.CheckCircle,{className:"w-5 h-5 text-green-600"}),a.jsx("p",{className:"text-green-800",children:"Password updated successfully!"})]}),n&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-800",children:"Error updating password. Please try again."})}),a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Update Password"}),a.jsxs("form",{onSubmit:o(E),className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"currentPassword",children:"Current Password"}),a.jsx(Ge,{id:"currentPassword",type:"password",...i("currentPassword"),error:(x=p.currentPassword)==null?void 0:x.message})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"newPassword",children:"New Password"}),a.jsx(Ge,{id:"newPassword",type:"password",...i("newPassword"),error:(z=p.newPassword)==null?void 0:z.message})]}),y&&a.jsx("div",{className:"space-y-2",children:a.jsx(Js,{strength:l})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(at,{htmlFor:"confirmPassword",children:"Confirm New Password"}),a.jsx(Ge,{id:"confirmPassword",type:"password",...i("confirmPassword"),error:(S=p.confirmPassword)==null?void 0:S.message})]}),a.jsx(J,{type:"submit",disabled:!b||!j||s,className:"w-full",size:"lg",children:s?"Updating...":"Update Password"}),y&&!j&&a.jsx("p",{className:"text-sm text-red-600 text-center",children:"Password must be strong to update (minimum 80% strength)"})]})]})]})};exports.AppLayout=ji;exports.Badge=Kt;exports.Button=J;exports.CartContainer=ki;exports.CartErrorBoundary=Kn;exports.ErrorBoundary=Nr;exports.GlobalErrorBoundary=Gn;exports.Header=en;exports.Input=Ge;exports.Label=at;exports.Modal=Gs;exports.PasswordStrength=Js;exports.Portal=Hs;exports.ProductCard=tn;exports.ProductErrorBoundary=Xs;exports.ProductFilters=rn;exports.ProductsContainer=Si;exports.ProfileContainer=Ru;exports.SearchBar=Ys;exports.Select=Er;exports.Spinner=Pr;
