exports.id=351,exports.ids=[351],exports.modules={986:(a,b,c)=>{"use strict";c.d(b,{Header:()=>d});let d=(0,c(7388).registerClientReference)(function(){throw Error("Attempted to call Header() from the server but Header is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gv/Projects/fruit_shop/libs/ui-components/src/lib/organisms/Header/Header.tsx","Header")},4903:()=>{},5228:(a,b,c)=>{Promise.resolve().then(c.bind(c,96052)),Promise.resolve().then(c.bind(c,94130)),Promise.resolve().then(c.bind(c,72423)),Promise.resolve().then(c.bind(c,11486)),Promise.resolve().then(c.bind(c,49482))},6112:(a,b,c)=>{"use strict";c.d(b,{ProductFiltersComponent:()=>d});let d=(0,c(7388).registerClientReference)(function(){throw Error("Attempted to call ProductFiltersComponent() from the server but ProductFiltersComponent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gv/Projects/fruit_shop/libs/ui-components/src/lib/organisms/ProductFilters/ProductFilters.tsx","ProductFiltersComponent")},9699:(a,b,c)=>{"use strict";c.d(b,{$:()=>i});var d=c(30666),e=c(787),f=c(60123),g=c(95549);let h=(0,f.F)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background select-none",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-600",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 focus:ring-gray-500",ghost:"hover:bg-gray-100 focus:ring-gray-500"},size:{default:"h-10 py-2 px-4",sm:"h-8 px-3 text-sm",lg:"h-12 px-6 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),i=(0,e.forwardRef)(({className:a,variant:b,size:c,...e},f)=>(0,d.jsx)("button",{className:(0,g.$)(h({variant:b,size:c,className:a})),ref:f,...e}));i.displayName="Button"},11486:(a,b,c)=>{"use strict";c.d(b,{ProductFiltersComponent:()=>h});var d=c(30666),e=c(48549),f=c(87319),g=c(9699);let h=({filters:a,onFiltersChange:b})=>(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(e.J,{htmlFor:"sort",children:"Sort By"}),(0,d.jsx)(f.l,{id:"sort",value:a.sortOrder,onChange:c=>{var d;return d=c.target.value,void b({...a,sortOrder:d})},children:[{value:"name-asc",label:"Alphabetically (A-Z)"},{value:"name-desc",label:"Alphabetically (Z-A)"},{value:"price-asc",label:"Price (Low-High)"},{value:"price-desc",label:"Price (High-Low)"},{value:"discount-desc",label:"Discount (Highest first)"}].map(a=>(0,d.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(e.J,{children:"Filter by Color"}),(0,d.jsx)("div",{className:"space-y-2",children:[{value:"green",label:"Green"},{value:"orange",label:"Orange"},{value:"yellow",label:"Yellow"}].map(c=>(0,d.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",checked:a.colors.includes(c.value),onChange:()=>(c=>{let d=a.colors.includes(c)?a.colors.filter(a=>a!==c):[...a.colors,c];b({...a,colors:d})})(c.value),className:"rounded border-gray-300"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:`w-4 h-4 rounded-full ${"green"===c.value?"bg-green-500":"orange"===c.value?"bg-orange-500":"bg-yellow-500"}`}),(0,d.jsx)("span",{children:c.label})]})]},c.value))})]}),(0,d.jsx)(g.$,{variant:"outline",onClick:()=>{b({colors:[],sortOrder:"name-asc",searchQuery:a.searchQuery})},className:"w-full",children:"Clear Filters"})]})},16040:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>k});var d=c(15768),e=c(27210),f=c(17540),g=c(4388),h=c(56101),i=c(81235),j=c.n(i);function k(){return(0,d.jsx)("div",{className:"min-h-[600px] flex items-center justify-center p-6",children:(0,d.jsxs)("div",{className:"text-center space-y-6 max-w-lg",children:[(0,d.jsx)("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto",children:(0,d.jsx)(e.A,{className:"w-10 h-10 text-blue-600"})}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h1",{className:"text-6xl font-bold text-gray-900",children:"404"}),(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-700",children:"Page Not Found"}),(0,d.jsx)("p",{className:"text-lg text-gray-600",children:"The page you're looking for doesn't exist or has been moved. Let's get you back on track!"})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,d.jsx)(j(),{href:"/",children:(0,d.jsxs)(h.$,{children:[(0,d.jsx)(f.A,{className:"w-5 h-5 mr-2"}),"Go Home"]})}),(0,d.jsx)(j(),{href:"/products",children:(0,d.jsxs)(h.$,{variant:"outline",children:[(0,d.jsx)(g.A,{className:"w-5 h-5 mr-2"}),"Browse Products"]})})]}),(0,d.jsx)("div",{className:"pt-4",children:(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Looking for something specific? Try our product search."})})]})})}},18380:(a,b,c)=>{Promise.resolve().then(c.bind(c,57350)),Promise.resolve().then(c.bind(c,986)),Promise.resolve().then(c.bind(c,86526)),Promise.resolve().then(c.bind(c,6112)),Promise.resolve().then(c.bind(c,95344))},29001:(a,b,c)=>{"use strict";c.d(b,{p:()=>g});var d=c(30666),e=c(787),f=c(95549);let g=(0,e.forwardRef)(({className:a,type:b="text",error:c,label:e,id:g,...h},i)=>{let j=g||`input-${Math.random().toString(36).substr(2,9)}`,k=c?`${j}-error`:void 0;return(0,d.jsxs)("div",{className:"w-full",children:[e&&(0,d.jsx)("label",{htmlFor:j,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,d.jsx)("input",{id:j,type:b,className:(0,f.$)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50",c&&"border-red-500 focus:ring-red-600",a),"aria-invalid":c?"true":"false","aria-describedby":k,ref:i,...h}),c&&(0,d.jsx)("p",{id:k,role:"alert","aria-live":"polite",className:"mt-1 text-sm text-red-600",children:c})]})});g.displayName="Input"},30622:(a,b,c)=>{"use strict";c.d(b,{Ay:()=>k});var d=c(44885);class e extends Error{constructor(a,b,c){super(b),this.status=a,this.code=c,this.name="ApiException"}}class f{constructor(a,b=1e4){this.axiosInstance=d.A.create({baseURL:a,timeout:b,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.axiosInstance.interceptors.request.use(a=>{let b=this.getAuthToken();return b&&(a.headers.Authorization=`Bearer ${b}`),a},a=>Promise.reject(a)),this.axiosInstance.interceptors.response.use(a=>a.data,a=>{let b=a.response?.status||500;throw new e(b,a.response?.data?.message||a.message||"An error occurred",a.response?.data?.code)})}getAuthToken(){return null}buildConfig(a){return{headers:a?.headers,params:a?.params,timeout:a?.timeout}}async get(a,b){return this.axiosInstance.get(a,this.buildConfig(b))}async post(a,b,c){return this.axiosInstance.post(a,b,this.buildConfig(c))}async put(a,b,c){return this.axiosInstance.put(a,b,this.buildConfig(c))}async delete(a,b){return this.axiosInstance.delete(a,this.buildConfig(b))}}class g{constructor(a){this.httpClient=a}async getAllProducts(){return(await this.httpClient.get("/products")).data||[]}async getProductById(a){return(await this.httpClient.get(`/products/${a}`)).data}async searchProducts(a){return(await this.httpClient.get(`/suggestions?searchQuery=${encodeURIComponent(a)}`)).data||[]}async getFilteredProducts(a){let b=new URLSearchParams;a.searchQuery&&b.append("search",a.searchQuery),a.colors&&a.colors.length>0&&b.append("colors",a.colors.join(",")),a.sortOrder&&b.append("sort",a.sortOrder);let c=b.toString(),d=c?`/products?${c}`:"/products";return(await this.httpClient.get(d)).data||[]}}class h{constructor(a){this.httpClient=a}async getCart(){return(await this.httpClient.get("/cart")).data||{items:[],totalPrice:0,totalItems:0}}async addToCart(a){return(await this.httpClient.post("/cart",a)).data||{items:[],totalPrice:0,totalItems:0}}async removeFromCart(a,b){return(await this.httpClient.post("/cart/remove",{productId:a,quantity:b})).data||{items:[],totalPrice:0,totalItems:0}}}class i{constructor(a){this.httpClient=a}async updatePassword(a){await this.httpClient.put("/user/password",a)}}class j{constructor(){let a=`http://localhost:${process.env.PORT||3001}/api`;this.httpClient=new f(a),this.products=new g(this.httpClient),this.cart=new h(this.httpClient),this.user=new i(this.httpClient)}static getInstance(){return j.instance||(j.instance=new j),j.instance}}let k=j},37321:(a,b,c)=>{"use strict";c.d(b,{AP:()=>i,IM:()=>j,_$:()=>h});var d=c(25057),e=c(55047),f=c(19386),g=c(30622);let h=()=>(0,d.I)({queryKey:["cart"],queryFn:()=>g.Ay.getInstance().cart.getCart(),retry:1,staleTime:3e4,placeholderData:{items:[],totalPrice:0,totalItems:0}}),i=()=>{let a=(0,e.jE)();return(0,f.n)({mutationFn:a=>g.Ay.getInstance().cart.addToCart(a),onSuccess:()=>{a.invalidateQueries({queryKey:["cart"]})}})},j=()=>{let a=(0,e.jE)();return(0,f.n)({mutationFn:({productId:a,quantity:b})=>g.Ay.getInstance().cart.removeFromCart(a,b),onSuccess:()=>{a.invalidateQueries({queryKey:["cart"]})}})}},39961:(a,b,c)=>{"use strict";c.d(b,{y:()=>f});var d=c(30666),e=c(95549);let f=({className:a,size:b="md",...c})=>(0,d.jsx)("div",{className:(0,e.$)("animate-spin rounded-full border-2 border-gray-300 border-t-blue-600",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[b],a),...c})},41758:(a,b,c)=>{Promise.resolve().then(c.bind(c,76289)),Promise.resolve().then(c.bind(c,44059)),Promise.resolve().then(c.t.bind(c,69257,23))},42949:(a,b,c)=>{"use strict";c.d(b,{$:()=>d.$n});var d=c(99588)},44059:(a,b,c)=>{"use strict";c.d(b,{Portal:()=>f});var d=c(787),e=c(47578);let f=({children:a})=>{let[b,c]=(0,d.useState)(!1),[f,g]=(0,d.useState)(null);return((0,d.useEffect)(()=>{c(!0);let a=document.getElementById("portal-root");return a||((a=document.createElement("div")).id="portal-root",document.body.appendChild(a)),g(a),()=>c(!1)},[]),b&&f)?(0,e.createPortal)(a,f):null}},44228:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,91652,23)),Promise.resolve().then(c.t.bind(c,31839,23)),Promise.resolve().then(c.t.bind(c,66611,23)),Promise.resolve().then(c.t.bind(c,18294,23)),Promise.resolve().then(c.t.bind(c,32034,23)),Promise.resolve().then(c.t.bind(c,39318,23)),Promise.resolve().then(c.t.bind(c,82284,23)),Promise.resolve().then(c.t.bind(c,2358,23)),Promise.resolve().then(c.t.bind(c,38982,23))},46486:(a,b,c)=>{Promise.resolve().then(c.bind(c,78843)),Promise.resolve().then(c.bind(c,64725)),Promise.resolve().then(c.t.bind(c,81235,23))},48549:(a,b,c)=>{"use strict";c.d(b,{J:()=>g});var d=c(30666),e=c(787),f=c(95549);let g=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("label",{ref:c,className:(0,f.$)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...b}));g.displayName="Label"},49482:(a,b,c)=>{"use strict";c.d(b,{AppLayout:()=>i});var d=c(30666),e=c(77824),f=c(55047),g=c(94130);let h=new e.E({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:3e4,gcTime:6e5},mutations:{retry:1}}}),i=({children:a})=>(0,d.jsx)(f.Ht,{client:h,children:(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Skip to main content"}),(0,d.jsx)(g.Header,{}),(0,d.jsx)("main",{id:"main-content",role:"main",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8","aria-label":"Main content",children:a}),(0,d.jsx)("div",{id:"sr-announcements","aria-live":"polite","aria-atomic":"true",className:"sr-only"})]})})},51844:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,38162,23)),Promise.resolve().then(c.t.bind(c,64629,23)),Promise.resolve().then(c.t.bind(c,19381,23)),Promise.resolve().then(c.t.bind(c,73308,23)),Promise.resolve().then(c.t.bind(c,76804,23)),Promise.resolve().then(c.t.bind(c,55864,23)),Promise.resolve().then(c.t.bind(c,56334,23)),Promise.resolve().then(c.t.bind(c,6416,23)),Promise.resolve().then(c.bind(c,91536))},56101:(a,b,c)=>{"use strict";c.d(b,{$:()=>i});var d=c(15768),e=c(47241),f=c(35517),g=c(65655);let h=(0,f.F)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background select-none",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-600",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 focus:ring-gray-500",ghost:"hover:bg-gray-100 focus:ring-gray-500"},size:{default:"h-10 py-2 px-4",sm:"h-8 px-3 text-sm",lg:"h-12 px-6 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),i=(0,e.forwardRef)(({className:a,variant:b,size:c,...e},f)=>(0,d.jsx)("button",{className:(0,g.$)(h({variant:b,size:c,className:a})),ref:f,...e}));i.displayName="Button",(0,e.forwardRef)(({className:a,type:b="text",error:c,label:e,id:f,...h},i)=>{let j=f||`input-${Math.random().toString(36).substr(2,9)}`,k=c?`${j}-error`:void 0;return(0,d.jsxs)("div",{className:"w-full",children:[e&&(0,d.jsx)("label",{htmlFor:j,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,d.jsx)("input",{id:j,type:b,className:(0,g.$)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50",c&&"border-red-500 focus:ring-red-600",a),"aria-invalid":c?"true":"false","aria-describedby":k,ref:i,...h}),c&&(0,d.jsx)("p",{id:k,role:"alert","aria-live":"polite",className:"mt-1 text-sm text-red-600",children:c})]})}).displayName="Input",(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("label",{ref:c,className:(0,g.$)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...b})).displayName="Label",(0,e.forwardRef)(({className:a,error:b,children:c,...e},f)=>(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("select",{className:(0,g.$)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",b&&"border-red-500 focus-visible:ring-red-500",a),ref:f,...e,children:c}),b&&(0,d.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b})]})).displayName="Select",c(64725),c(78843)},57350:(a,b,c)=>{"use strict";c.d(b,{GlobalErrorBoundary:()=>d});let d=(0,c(7388).registerClientReference)(function(){throw Error("Attempted to call GlobalErrorBoundary() from the server but GlobalErrorBoundary is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gv/Projects/fruit_shop/libs/ui-components/src/lib/organisms/GlobalErrorBoundary/GlobalErrorBoundary.tsx","GlobalErrorBoundary")},61479:(a,b,c)=>{Promise.resolve().then(c.bind(c,96110))},64725:(a,b,c)=>{"use strict";c.d(b,{Portal:()=>d});let d=(0,c(7388).registerClientReference)(function(){throw Error("Attempted to call Portal() from the server but Portal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gv/Projects/fruit_shop/libs/ui-components/src/lib/atoms/Portal/Portal.tsx","Portal")},69735:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>m,metadata:()=>k,viewport:()=>l});var d=c(15768),e=c(76022),f=c.n(e),g=c(60792),h=c.n(g),i=c(95344);c(986),c(86526),c(6112);var j=c(57350);c(4903);let k={title:{default:"FruitShop - Fresh Fruits Delivered to Your Door",template:"%s | FruitShop"},description:"Shop for premium quality fruits with convenient packaging sizes. From farm to your doorstep in just a few clicks. Free delivery on orders over $50.",keywords:["fresh fruits","organic fruits","fruit delivery","healthy food","farm fresh","premium fruits"],authors:[{name:"FruitShop Team"}],creator:"FruitShop",metadataBase:new URL("http://localhost:3000"),alternates:{canonical:"/"},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}},openGraph:{type:"website",locale:"en_US",url:"/",title:"FruitShop - Fresh Fruits Delivered",description:"Premium quality fruits with convenient packaging. Farm to doorstep delivery.",siteName:"FruitShop",images:[{url:"/og-image.jpg",width:1200,height:630,alt:"FruitShop - Fresh Fruits Delivered"}]},twitter:{card:"summary_large_image",title:"FruitShop - Fresh Fruits Delivered",description:"Premium quality fruits with convenient packaging. Farm to doorstep delivery.",creator:"@fruitshop",images:["/og-image.jpg"]},verification:{google:"your-google-verification-code",yandex:"your-yandex-verification-code",yahoo:"your-yahoo-verification-code"}},l={width:"device-width",initialScale:1,maximumScale:1};function m({children:a}){return(0,d.jsxs)("html",{lang:"en",children:[(0,d.jsxs)("head",{children:[(0,d.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,d.jsx)("link",{rel:"apple-touch-icon",href:"/icons/icon-192x192.png"}),(0,d.jsx)("meta",{name:"theme-color",content:"#2563eb"}),(0,d.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"}),(0,d.jsx)("meta",{name:"color-scheme",content:"light"}),(0,d.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,d.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"})]}),(0,d.jsx)("body",{className:`${f().variable} ${h().variable} antialiased`,children:(0,d.jsx)(j.GlobalErrorBoundary,{children:(0,d.jsx)(i.AppLayout,{children:a})})})]})}},72423:(a,b,c)=>{"use strict";c.d(b,{ProductCard:()=>p});var d=c(30666),e=c(787);class f{static filterProducts(a,b){let c=a;if(b.searchQuery){let a=b.searchQuery.toLowerCase();c=c.filter(b=>b.name.toLowerCase().includes(a))}return b.colors.length>0&&(c=c.filter(a=>a.colors.some(a=>b.colors.includes(a)))),c=this.sortProducts(c,b.sortOrder)}static sortProducts(a,b){let c=[...a];switch(b){case"name-asc":return c.sort((a,b)=>a.name.localeCompare(b.name));case"name-desc":return c.sort((a,b)=>b.name.localeCompare(a.name));case"price-asc":return c.sort((a,b)=>a.price-b.price);case"price-desc":return c.sort((a,b)=>b.price-a.price);case"discount-desc":return c.sort((a,b)=>b.discount-a.discount);default:return c}}static calculateDiscountedPrice(a,b){return a*(1-b/100)}static isValidQuantity(a,b){return a>0&&a%b==0}static getMaxValidQuantity(a,b){return Math.floor(a/b)*b}}class g{static addToCart(a,b,c){let d,e=a.items.findIndex(a=>a.productId===b.id);if(e>=0)d=a.items.map((a,b)=>b===e?{...a,quantity:a.quantity+c}:a);else{let e={productId:b.id,productName:b.name,price:b.price,quantity:c,image:b.image,packageSize:b.packageSize};d=[...a.items,e]}return this.calculateTotals({...a,items:d})}static removeFromCart(a,b,c){let d=a.items.map(a=>a.productId===b?{...a,quantity:Math.max(0,a.quantity-c)}:a).filter(a=>a.quantity>0);return this.calculateTotals({...a,items:d})}static calculateTotals(a){let b=a.items.reduce((a,b)=>a+b.quantity,0),c=a.items.reduce((a,b)=>a+b.price*b.quantity,0);return{...a,totalItems:b,totalPrice:c}}static getItemQuantityInCart(a,b){return a.items.filter(a=>a.productId===b).reduce((a,b)=>a+b.quantity,0)}static groupItemsByProductId(a){return Object.values(a.reduce((a,b)=>(a[b.productId]?a[b.productId]={...a[b.productId],quantity:a[b.productId].quantity+b.quantity}:a[b.productId]={...b},a),{}))}static removeItemsPartially(a,b,c){let d=c,e=[];for(let c of a.items)if(c.productId===b&&d>0){let a=c.quantity;a<=d?d-=a:(e.push({...c,quantity:a-d}),d=0)}else e.push(c);return this.calculateTotals({...a,items:e})}}var h=c(37321),i=c(9699),j=c(29001),k=c(82161),l=c(96652),m=c(79683),n=c(38167),o=c(1281);let p=({product:a})=>{let[b,c]=(0,e.useState)(a.packageSize),[p,q]=(0,e.useState)(!1),{data:r}=(0,h._$)(),{mutate:s,isPending:t}=(0,h.AP)(),u=f.calculateDiscountedPrice(a.price,a.discount),v=r?g.getItemQuantityInCart(r,a.id):0,w=a.stock-v,x=f.isValidQuantity(b,a.packageSize),y=x&&b<=w&&w>0;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("article",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2","aria-labelledby":`product-title-${a.id}`,children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(o.default,{src:a.image,alt:`${a.name} - Fresh fruit available in ${a.colors.join(", ")} colors`,width:400,height:300,className:"w-full h-48 object-cover",priority:!1}),a.discount>0&&(0,d.jsxs)(k.E,{variant:"danger",className:"absolute top-2 right-2","aria-label":`${a.discount}% discount`,children:[a.discount,"% OFF"]})]}),(0,d.jsxs)("div",{className:"p-4 space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{id:`product-title-${a.id}`,className:"font-semibold text-lg",children:a.name}),(0,d.jsx)("div",{className:"flex items-center space-x-2 mt-1","aria-label":"Available colors",children:a.colors.map(a=>(0,d.jsx)("div",{className:`w-4 h-4 rounded-full ${"green"===a?"bg-green-500":"orange"===a?"bg-orange-500":"bg-yellow-500"}`,"aria-label":`${a} color option`,role:"img"},a))})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2","aria-label":"Price information",children:[(0,d.jsxs)("span",{className:"text-lg font-bold",children:["$",u.toFixed(2)]}),a.discount>0&&(0,d.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",a.price.toFixed(2)]})]}),(0,d.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>q(!0),"aria-label":`View details for ${a.name}`,children:(0,d.jsx)(m.A,{className:"w-4 h-4","aria-hidden":"true"})})]}),(0,d.jsxs)("div",{className:"text-sm text-gray-600","aria-label":"Product information",children:[(0,d.jsxs)("p",{children:["Stock: ",(0,d.jsx)("span",{"aria-label":`${w} units available`,children:w})]}),(0,d.jsxs)("p",{children:["Package: ",(0,d.jsxs)("span",{"aria-label":`Sold in packages of ${a.packageSize} units`,children:[a.packageSize," units"]})]})]}),(0,d.jsxs)("fieldset",{className:"flex items-center space-x-2",children:[(0,d.jsx)("legend",{className:"sr-only",children:"Select quantity"}),(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{let d=b-a.packageSize;d>=a.packageSize&&c(d)},disabled:b<=a.packageSize,"aria-label":`Decrease quantity by ${a.packageSize}`,children:"-"}),(0,d.jsx)(j.p,{type:"number",value:b,onChange:a=>{c(parseInt(a.target.value)||0)},className:"w-20 text-center",min:a.packageSize,step:a.packageSize,"aria-label":"Quantity","aria-describedby":`quantity-help-${a.id}`}),(0,d.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{let d=b+a.packageSize;d<=w&&c(d)},disabled:b+a.packageSize>w,"aria-label":`Increase quantity by ${a.packageSize}`,children:"+"}),(0,d.jsxs)("div",{id:`quantity-help-${a.id}`,className:"sr-only",children:["Quantity must be in multiples of ",a.packageSize,". Available stock: ",w]})]}),(0,d.jsxs)(i.$,{onClick:()=>{y&&s({productId:a.id,productName:a.name,price:u,quantity:b,image:a.image,packageSize:a.packageSize})},disabled:!y||t,className:"w-full","aria-describedby":x?void 0:`quantity-error-${a.id}`,children:[(0,d.jsx)(n.A,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),t?"Adding to cart...":`Add ${b} ${1===b?"unit":"units"} to Cart`]}),!x&&(0,d.jsxs)("p",{id:`quantity-error-${a.id}`,role:"alert",className:"text-sm text-red-600",children:["Quantity must be a multiple of ",a.packageSize]})]})]}),(0,d.jsx)(l.Modal,{isOpen:p,onClose:()=>q(!1),title:`${a.name} - Product Details`,size:"lg",children:(0,d.jsxs)("div",{className:"p-6 space-y-4",children:[(0,d.jsx)(o.default,{src:a.image,alt:`Detailed view of ${a.name} - Fresh fruit`,width:600,height:400,className:"w-full h-64 object-cover rounded-lg"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"text-2xl font-bold",children:a.name}),(0,d.jsxs)("div",{className:"flex items-center space-x-2","aria-label":"Price information",children:[(0,d.jsxs)("span",{className:"text-2xl font-bold",children:["$",u.toFixed(2)]}),a.discount>0&&(0,d.jsxs)("span",{className:"text-lg text-gray-500 line-through","aria-label":`Original price $${a.price.toFixed(2)}`,children:["$",a.price.toFixed(2)]})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("span",{className:"font-medium",children:"Available colors:"}),a.colors.map(a=>(0,d.jsx)("div",{className:`w-6 h-6 rounded-full ${"green"===a?"bg-green-500":"orange"===a?"bg-orange-500":"bg-yellow-500"}`,"aria-label":`${a} color option`,role:"img"},a))]}),a.discount>0&&(0,d.jsxs)(k.E,{variant:"danger","aria-label":`${a.discount}% discount applied`,children:[a.discount,"% OFF"]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Stock:"})," ",a.stock," units"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Package Size:"})," ",a.packageSize," units"]})]}),(0,d.jsx)("p",{className:"text-gray-700",children:a.description})]})]})})]})}},75391:(a,b,c)=>{Promise.resolve().then(c.bind(c,90236))},76289:(a,b,c)=>{"use strict";c.d(b,{ErrorBoundary:()=>j});var d=c(30666),e=c(787),f=c(12715),g=c(85236),h=c(23854),i=c(9699);class j extends e.Component{constructor(a){super(a),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,b){console.error("ErrorBoundary caught an error:",a,b),this.setState({error:a,errorInfo:b})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,d.jsx)("div",{className:"min-h-[400px] flex items-center justify-center p-6",children:(0,d.jsxs)("div",{className:"text-center space-y-6 max-w-md",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:(0,d.jsx)(f.A,{className:"w-8 h-8 text-red-600"})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Something went wrong"}),(0,d.jsx)("p",{className:"text-gray-600",children:"We're sorry, but something unexpected happened. Please try refreshing the page or go back to the homepage."})]}),this.props.showDetails&&this.state.error&&(0,d.jsxs)("details",{className:"text-left bg-gray-100 p-4 rounded-lg",children:[(0,d.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 mb-2",children:"Error Details"}),(0,d.jsxs)("pre",{className:"text-xs text-red-600 whitespace-pre-wrap overflow-auto",children:[this.state.error.message,this.state.error.stack]})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,d.jsxs)(i.$,{onClick:this.handleRetry,variant:"outline",children:[(0,d.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Try Again"]}),(0,d.jsxs)(i.$,{onClick:this.handleGoHome,children:[(0,d.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})]})}):this.props.children}}},78843:(a,b,c)=>{"use strict";c.d(b,{ErrorBoundary:()=>d});let d=(0,c(7388).registerClientReference)(function(){throw Error("Attempted to call ErrorBoundary() from the server but ErrorBoundary is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gv/Projects/fruit_shop/libs/ui-components/src/lib/atoms/ErrorBoundary/ErrorBoundary.tsx","ErrorBoundary")},82161:(a,b,c)=>{"use strict";c.d(b,{E:()=>f});var d=c(30666),e=c(95549);let f=({className:a,variant:b="default",...c})=>(0,d.jsx)("span",{className:(0,e.$)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium","border border-current border-opacity-20",{default:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800"}[b],a),role:c.role||"status",...c})},86526:(a,b,c)=>{"use strict";c.d(b,{ProductCard:()=>d});let d=(0,c(7388).registerClientReference)(function(){throw Error("Attempted to call ProductCard() from the server but ProductCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gv/Projects/fruit_shop/libs/ui-components/src/lib/organisms/ProductCard/ProductCard.tsx","ProductCard")},87319:(a,b,c)=>{"use strict";c.d(b,{l:()=>g});var d=c(30666),e=c(787),f=c(95549);let g=(0,e.forwardRef)(({className:a,error:b,children:c,...e},g)=>(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("select",{className:(0,f.$)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",b&&"border-red-500 focus-visible:ring-red-500",a),ref:g,...e,children:c}),b&&(0,d.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b})]}));g.displayName="Select"},90236:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i});var d=c(30666);c(787);var e=c(12715),f=c(85236),g=c(23854),h=c(42949);function i({error:a,reset:b}){return(0,d.jsx)("div",{className:"min-h-[600px] flex items-center justify-center p-6",children:(0,d.jsxs)("div",{className:"text-center space-y-6 max-w-lg",children:[(0,d.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:(0,d.jsx)(e.A,{className:"w-10 h-10 text-red-600"})}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Page Error"}),(0,d.jsx)("p",{className:"text-lg text-gray-600",children:"We encountered an error while loading this page. This might be a temporary issue."})]}),!1,(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,d.jsxs)(h.$,{onClick:b,variant:"outline",children:[(0,d.jsx)(f.A,{className:"w-5 h-5 mr-2"}),"Try Again"]}),(0,d.jsxs)(h.$,{onClick:()=>window.location.href="/",children:[(0,d.jsx)(g.A,{className:"w-5 h-5 mr-2"}),"Go Home"]})]})]})})}},94130:(a,b,c)=>{"use strict";c.d(b,{Header:()=>m});var d=c(30666),e=c(69257),f=c.n(e),g=c(6652),h=c(5250),i=c(38167),j=c(16919),k=c(37321),l=c(82161);let m=()=>{let a=(0,g.usePathname)(),{data:b}=(0,k._$)(),c=[{href:"/products",label:"Products",icon:h.A},{href:"/cart",label:"Cart",icon:i.A},{href:"/profile",label:"Profile",icon:j.A}];return(0,d.jsx)("header",{role:"banner",className:"bg-white shadow-sm border-b","aria-label":"Site header",children:(0,d.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,d.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,d.jsx)(f(),{href:"/",className:"font-bold text-xl text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 rounded","aria-label":"FruitShop home page",children:"FruitShop"}),(0,d.jsx)("nav",{role:"navigation","aria-label":"Main navigation",className:"flex items-center space-x-4",children:c.map(({href:c,label:e,icon:g})=>{let h=a===c,i="/cart"===c,j=b?.totalItems||0;return(0,d.jsxs)(f(),{href:c,className:`flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 ${h?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,"aria-label":i&&j>0?`${e} (${j} items)`:e,"aria-current":h?"page":void 0,children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(g,{className:"w-4 h-4","aria-hidden":"true"}),i&&j>0&&(0,d.jsx)(l.E,{variant:"danger",className:"absolute -top-2 -right-10 min-w-[1.2rem] h-4 text-xs flex items-center justify-center p-0 transform translate-x-1/2 -translate-y-1/2","aria-label":`${j} items in cart`,children:j})]}),(0,d.jsx)("span",{children:e})]},c)})})]})})})}},95344:(a,b,c)=>{"use strict";c.d(b,{AppLayout:()=>d});let d=(0,c(7388).registerClientReference)(function(){throw Error("Attempted to call AppLayout() from the server but AppLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gv/Projects/fruit_shop/libs/ui-components/src/lib/templates/AppLayout/AppLayout.tsx","AppLayout")},96052:(a,b,c)=>{"use strict";c.d(b,{GlobalErrorBoundary:()=>i});var d=c(30666),e=c(787),f=c(12715),g=c(85236),h=c(23854);class i extends e.Component{constructor(a){super(a),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,b){console.error("Global ErrorBoundary caught an error:",a,b)}render(){return this.state.hasError?(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:(0,d.jsxs)("div",{className:"text-center space-y-8 max-w-lg",children:[(0,d.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:(0,d.jsx)(f.A,{className:"w-10 h-10 text-red-600"})}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Oops! Something went wrong"}),(0,d.jsx)("p",{className:"text-lg text-gray-600",children:"We're experiencing technical difficulties with FruitShop. Our team has been notified and is working to fix this issue."})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,d.jsxs)("button",{onClick:this.handleRetry,className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-md shadow-sm text-base font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[(0,d.jsx)(g.A,{className:"w-5 h-5 mr-2"}),"Reload Page"]}),(0,d.jsxs)("button",{onClick:this.handleGoHome,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[(0,d.jsx)(h.A,{className:"w-5 h-5 mr-2"}),"Go to Homepage"]})]}),(0,d.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"If this problem persists, please contact our support team."})})]})}):this.props.children}}},96110:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(7388).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/gv/Projects/fruit_shop/apps/web/app/error.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gv/Projects/fruit_shop/apps/web/app/error.tsx","default")},96652:(a,b,c)=>{"use strict";c.d(b,{Modal:()=>i});var d=c(30666),e=c(787),f=c(88578),g=c(9699),h=c(44059);let i=({isOpen:a,onClose:b,title:c,children:i,size:j="md"})=>((0,e.useEffect)(()=>{let c=a=>{"Escape"===a.key&&b()};if(a){document.addEventListener("keydown",c),document.body.style.overflow="hidden";let a=document.getElementById("modal-dialog");a&&a.focus()}return()=>{document.removeEventListener("keydown",c),document.body.style.overflow="unset"}},[a,b]),a)?(0,d.jsx)(h.Portal,{children:(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":c?"modal-title":void 0,children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:b,"aria-hidden":"true"}),(0,d.jsxs)("div",{id:"modal-dialog",className:`relative bg-white rounded-lg shadow-lg w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[j]} max-h-[90vh] overflow-hidden focus:outline-none`,tabIndex:-1,children:[c&&(0,d.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,d.jsx)("h2",{id:"modal-title",className:"text-xl font-semibold",children:c}),(0,d.jsx)(g.$,{variant:"ghost",size:"sm",onClick:b,className:"p-1 h-auto","aria-label":"Close dialog",children:(0,d.jsx)(f.A,{className:"w-5 h-5","aria-hidden":"true"})})]}),(0,d.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",role:"document",children:i})]})]})}):null},96888:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(4713);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},99588:(a,b,c)=>{"use strict";c.d(b,{$n:()=>d.$,tH:()=>f.ErrorBoundary,y$:()=>e.y});var d=c(9699);c(29001),c(48549),c(82161);var e=c(39961);c(87319),c(44059);var f=c(76289)}};